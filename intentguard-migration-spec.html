<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>IntentGuard Migration Spec</title>
  <style>
:root {
  --bg: #0f172a; --surface: #1e293b; --border: #334155;
  --text: #e2e8f0; --muted: #94a3b8; --accent: #38bdf8;
  --green: #22c55e; --yellow: #eab308; --orange: #f97316; --red: #ef4444;
  --purple: #a855f7; --blue: #3b82f6;
}
* { box-sizing: border-box; margin: 0; padding: 0; }
body { font-family: 'SF Mono', 'Fira Code', monospace; background: var(--bg); color: var(--text); line-height: 1.6; padding: 2rem; max-width: 1200px; margin: 0 auto; }
h1 { font-size: 2rem; margin-bottom: 0.5rem; }
h2 { font-size: 1.4rem; color: var(--accent); margin: 2rem 0 1rem; border-bottom: 1px solid var(--border); padding-bottom: 0.5rem; }
h3 { font-size: 1.1rem; color: var(--purple); margin: 1rem 0 0.5rem; }
.hero { text-align: center; padding: 2rem 0 1rem; }
.subtitle { color: var(--muted); font-size: 1rem; margin: 0.5rem 0; }
.version { color: var(--muted); font-size: 0.85rem; margin-bottom: 1rem; }
.status-bar { display: flex; justify-content: center; gap: 1.5rem; flex-wrap: wrap; }
.status-item { display: flex; align-items: center; gap: 0.4rem; font-size: 0.85rem; }
.dot { width: 8px; height: 8px; border-radius: 50%; }
.dot.live { background: var(--green); box-shadow: 0 0 6px var(--green); }
.dot.building { background: var(--yellow); box-shadow: 0 0 6px var(--yellow); }
.dot.planned { background: var(--muted); }
section { margin: 2rem 0; }
.card { background: var(--surface); border: 1px solid var(--border); border-radius: 8px; padding: 1rem; margin: 0.75rem 0; }
.card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem; }
.badge { padding: 2px 8px; border-radius: 4px; font-size: 0.75rem; font-weight: 600; text-transform: uppercase; }
.badge-complete { background: rgba(34,197,94,0.2); color: var(--green); }
.badge-building { background: rgba(234,179,8,0.2); color: var(--yellow); }
.badge-pending { background: rgba(148,163,184,0.2); color: var(--muted); }
.badge-planned { background: rgba(168,85,247,0.2); color: var(--purple); }
.badge-critical { background: rgba(239,68,68,0.2); color: var(--red); }
.badge-high { background: rgba(249,115,22,0.2); color: var(--orange); }
.badge-medium { background: rgba(234,179,8,0.2); color: var(--yellow); }
.badge-low { background: rgba(34,197,94,0.2); color: var(--green); }
.badge-resolved { background: rgba(59,130,246,0.2); color: var(--blue); }
.badge-ported { background: rgba(34,197,94,0.2); color: var(--green); }
.badge-converting { background: rgba(234,179,8,0.2); color: var(--yellow); }
.badge-keep-as-mcp { background: rgba(59,130,246,0.2); color: var(--blue); }
.badge-low-priority { background: rgba(148,163,184,0.2); color: var(--muted); }
.badge-done { background: rgba(34,197,94,0.2); color: var(--green); }
.badge-wip { background: rgba(234,179,8,0.2); color: var(--yellow); }
.badge-todo { background: rgba(148,163,184,0.2); color: var(--muted); }
.badge-active { background: rgba(34,197,94,0.2); color: var(--green); }
.badge-inactive { background: rgba(148,163,184,0.2); color: var(--muted); }
.tile-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(340px, 1fr)); gap: 1rem; }
.detail { color: var(--muted); font-size: 0.85rem; }
.mono { font-family: 'SF Mono', monospace; font-size: 0.85rem; color: var(--accent); }
.layer-box { background: var(--surface); border: 1px solid var(--border); border-radius: 8px; padding: 1rem; margin: 0.75rem 0; }
.layer-title { font-weight: 700; color: var(--accent); margin-bottom: 0.5rem; }
.layer-role { color: var(--muted); font-size: 0.85rem; margin-bottom: 0.75rem; }
.channel-bar { display: flex; flex-wrap: wrap; gap: 0.5rem; margin: 1rem 0; }
.channel-chip { padding: 4px 10px; border-radius: 4px; font-size: 0.8rem; background: var(--surface); border: 1px solid var(--border); }
.channel-chip.active { border-color: var(--green); color: var(--green); }
.grid-table { display: grid; grid-template-columns: auto repeat(3, 1fr); gap: 2px; margin: 1rem 0; }
.grid-cell { background: var(--surface); border: 1px solid var(--border); padding: 0.75rem; text-align: center; border-radius: 4px; }
.grid-cell.active { border-color: var(--green); box-shadow: 0 0 8px rgba(34,197,94,0.3); }
.grid-header { background: transparent; font-weight: 700; color: var(--accent); font-size: 0.8rem; }
.grid-row-label { background: transparent; font-weight: 700; color: var(--purple); display: flex; align-items: center; font-size: 0.8rem; }
.equation { background: var(--surface); border: 1px solid var(--border); border-radius: 8px; padding: 1rem; font-family: 'SF Mono', monospace; text-align: center; font-size: 0.9rem; color: var(--accent); margin: 1rem 0; }
pre { background: var(--surface); border: 1px solid var(--border); border-radius: 8px; padding: 1rem; overflow-x: auto; font-size: 0.8rem; margin: 1rem 0; color: var(--muted); }
.checklist { list-style: none; padding: 0; }
.checklist li { padding: 0.3rem 0; font-size: 0.9rem; }
.check-done::before { content: '\2705 '; }
.check-wip::before { content: '\1F527 '; }
.check-todo::before { content: '\2B1C '; }
.stats-bar { display: flex; gap: 1.5rem; justify-content: center; margin: 1rem 0; font-size: 0.9rem; }
.stats-bar span { display: flex; align-items: center; gap: 0.4rem; }
.split-cols { display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; }
.finding { border-left: 3px solid var(--border); padding-left: 1rem; margin: 0.75rem 0; }
.finding.critical { border-left-color: var(--red); }
.finding.high { border-left-color: var(--orange); }
.finding.medium { border-left-color: var(--yellow); }
.finding.low { border-left-color: var(--green); }
.finding.resolved { border-left-color: var(--blue); }
.warn-box { background: rgba(239,68,68,0.1); border: 1px solid var(--red); border-radius: 8px; padding: 1rem; margin: 1rem 0; }
.warn-box h3 { color: var(--red); }
.future-phase { opacity: 0.6; }
.section { margin: 2rem 0; }
.subsection { margin: 1.5rem 0; }
.protocol-flow { margin: 1rem 0; }
.protocol-step { display: flex; gap: 1rem; margin: 0.75rem 0; background: var(--surface); border: 1px solid var(--border); border-radius: 8px; padding: 1rem; }
.step-number { background: var(--accent); color: var(--bg); width: 28px; height: 28px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; flex-shrink: 0; }
.step-content { flex: 1; }
.config-block { background: var(--surface); border: 1px solid var(--border); border-radius: 6px; padding: 0.75rem; margin: 1rem 0; font-size: 0.85rem; color: var(--muted); }
.callout { background: rgba(59,130,246,0.1); border: 1px solid var(--blue); border-radius: 8px; padding: 1rem; margin: 1rem 0; }
table { width: 100%; border-collapse: collapse; margin: 1rem 0; }
th { padding: 0.5rem; text-align: left; border-bottom: 2px solid var(--border); color: var(--muted); font-size: 0.8rem; }
td { padding: 0.5rem; border-bottom: 1px solid var(--border); font-size: 0.85rem; }
@media print {
  body { background: white !important; color: black !important; -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; }
  * { -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; }
  .page-break { page-break-before: always; }
}
@media (max-width: 768px) {
  .tile-grid { grid-template-columns: 1fr; }
  .split-cols { grid-template-columns: 1fr; }
  .grid-table { font-size: 0.75rem; }
}
</style>
</head>
<body>
  
    <div class="hero">
      <h1>üõ°Ô∏è IntentGuard ‚Äî Headless CEO</h1>
      <div class="subtitle">Migration Spec: ThetaDriven Intelligence ‚Üí IntentGuard Bot CEO</div>
      <div class="version">v2.5.0 ‚Äî Modular TSX Spec (27 sections) | OpenClaw 2026.2.13 | Node 24.13.1 | Mac Mini (Always-On)</div>
      <div class="status-bar">
        
          <div class="status-item">
            <div class="dot live"></div> OpenClaw Gateway (54 skills)
          </div>
        
          <div class="status-item">
            <div class="dot live"></div> Sonnet 4 via Proxy ($0)
          </div>
        
          <div class="status-item">
            <div class="dot live"></div> Discord Bot (Tesseract)
          </div>
        
          <div class="status-item">
            <div class="dot live"></div> Claude Flow v3 (90 MCP)
          </div>
        
          <div class="status-item">
            <div class="dot live"></div> 3 launchd Services
          </div>
        
          <div class="status-item">
            <div class="dot building"></div> CEO/Dev Subdivision
          </div>
        
      </div>
    </div>
  
  
    <section>
      <h2>Two-Repo Architecture</h2>
      <div style="text-align:center;margin:1rem 0;font-size:0.9rem;color:var(--muted)">
        IntentGuard (Cortex) ‚Üí Claude Flow v3 (Orchestrator) ‚Üí OpenClaw (Body at ws://127.0.0.1:18789) ‚Üí claude-max-api-proxy (LLM at :3456) ‚Üí Channels
      </div>
      
    <div class="layer-box">
      <div class="layer-title">INTENTGUARD (Cortex)</div>
      <div class="layer-role">Parent Process ‚Äî Sovereign Engine</div>
      <div style="margin:0.3rem 0"><strong>FIM Auth Plugin v2.0</strong> ‚Äî <span class="detail">Geometric permissions, 20-dim tensor overlap (0.0004ms). Installed as ~/.openclaw/plugins/intentguard-fim-auth.js</span></div><div style="margin:0.3rem 0"><strong>Trust-Debt Pipeline</strong> ‚Äî <span class="detail">8-step sovereignty scoring, JSONL persistence, 20 orthogonal categories</span></div><div style="margin:0.3rem 0"><strong>WebSocket Parasite Hook</strong> ‚Äî <span class="detail">Connects ws://127.0.0.1:18789 ‚Äî intercepts messages, injects LLM categorization</span></div><div style="margin:0.3rem 0"><strong>3-Tier LLM Grounding</strong> ‚Äî <span class="detail">Tier 0: Ollama llama3.2:1b (fast local), Tier 1: Claude Sonnet via proxy ($0), Tier 2: Human admin blessing</span></div><div style="margin:0.3rem 0"><strong>Night Shift Scheduler</strong> ‚Äî <span class="detail">Ghost User that injects proactive tasks when idle. 10 registered tasks, sovereignty-gated.</span></div><div style="margin:0.3rem 0"><strong>CEO Loop v2</strong> ‚Äî <span class="detail">Always-on: reads spec, prioritizes, subdivides, implements, commits, reports to Discord</span></div><div style="margin:0.3rem 0"><strong>Steering Loop</strong> ‚Äî <span class="detail">Ask-and-Predict protocol with countdown timers (5s/30s/60s sovereignty-based)</span></div><div style="margin:0.3rem 0"><strong>6 Custom Skills</strong> ‚Äî <span class="detail">Registered in OpenClaw workspace: LLM controller, ThetaSteer, voice reactor, Claude Flow bridge, email, night shift</span></div>
    </div>
      <div style="text-align:center;font-size:1.2rem;margin:0.5rem 0">&#11015;&#65039; orchestrates</div>
      
    <div class="layer-box">
      <div class="layer-title">CLAUDE FLOW v3 (Orchestrator)</div>
      <div class="layer-role">Multi-Agent Orchestration ‚Äî 90 MCP tools</div>
      <div style="margin:0.3rem 0"><strong>Agent Swarms</strong> ‚Äî <span class="detail">Hierarchical mesh of 15+ agents for parallel task execution</span></div><div style="margin:0.3rem 0"><strong>MCP Tool Registry</strong> ‚Äî <span class="detail">90 MCP tools with sub-100ms response times</span></div><div style="margin:0.3rem 0"><strong>Session Management</strong> ‚Äî <span class="detail">Persistent agent state and context across sessions</span></div>
    </div>
      <div style="text-align:center;font-size:1.2rem;margin:0.5rem 0">&#11015;&#65039; spawns + proxies</div>
      
    <div class="layer-box">
      <div class="layer-title">OPENCLAW (Body)</div>
      <div class="layer-role">Child Process ‚Äî Multi-Channel Gateway (npm openclaw@2026.2.13)</div>
      <div style="margin:0.3rem 0"><strong>Gateway Server</strong> ‚Äî <span class="detail">HTTP + WebSocket on port 18789, dashboard UI</span></div><div style="margin:0.3rem 0"><strong>Agent Runtime</strong> ‚Äî <span class="detail">LLM agent execution loop with tool routing</span></div><div style="margin:0.3rem 0"><strong>Channel Adapters</strong> ‚Äî <span class="detail">33 channel types supported out-of-box</span></div><div style="margin:0.3rem 0"><strong>Skills Platform</strong> ‚Äî <span class="detail">Workspace skills in ~/.openclaw/workspace/skills/</span></div><div style="margin:0.3rem 0"><strong>Session Manager</strong> ‚Äî <span class="detail">User sessions and context persistence</span></div>
    </div>
      <div style="text-align:center;font-size:1.2rem;margin:0.5rem 0">&#11015;&#65039; routes LLM via</div>
      
    <div class="layer-box">
      <div class="layer-title">CLAUDE-MAX-API-PROXY (LLM)</div>
      <div class="layer-role">OpenAI-compatible API ‚Äî Sonnet 4 at $0/token via Max subscription</div>
      <div style="margin:0.3rem 0"><strong>API Proxy</strong> ‚Äî <span class="detail">localhost:3456/v1 ‚Äî converts Max subscription to OpenAI-compatible API</span></div><div style="margin:0.3rem 0"><strong>Model Routing</strong> ‚Äî <span class="detail">claude-sonnet-4 (primary) with ollama/llama3.2:1b fallback</span></div>
    </div>
      <div style="text-align:center;font-size:1.2rem;margin:0.5rem 0">&#11015;&#65039; connects to</div>
      <div class="channel-bar">
        <span class="channel-chip active">üí¨ Discord (11 channels)</span><span class="channel-chip active">üì± WhatsApp (adapter built)</span><span class="channel-chip active">‚úàÔ∏è Telegram (adapter built)</span><span class="channel-chip ">üîí Signal</span><span class="channel-chip ">üí¨ iMessage</span><span class="channel-chip ">üëî Teams</span><span class="channel-chip active">üåê Web UI (OpenClaw dashboard)</span><span class="channel-chip active">üìß Email (thetadriven.com API)</span><span class="channel-chip active">üê¶ X/Twitter (browser automation)</span>
      </div>
      <div class="warn-box">
        <h3>Debate Flags</h3>
        <div style="margin:0.3rem 0"><strong>mcpProxy:</strong> <span class="detail">RESOLVED: FIM plugin + WebSocket parasite hook. See src/wrapper.ts</span></div><div style="margin:0.3rem 0"><strong>latency:</strong> <span class="detail">MEASURED: 0.0004ms overlap + <1ms plugin hook = negligible</span></div><div style="margin:0.3rem 0"><strong>failureMode:</strong> <span class="detail">DEFINED: Plugin fail-open (allow) + WebSocket reconnects on disconnect</span></div>
      </div>
    </section>
  
    <section>
      <h2>Module Migration Status</h2>
      <div class="stats-bar">
        <span><span class="dot live"></span> complete: 2</span><span><span class="dot building"></span> building: 4</span><span><span class="dot planned"></span> pending: 4</span><span><span class="dot planned"></span> planned: 1</span>
      </div>
      <div class="tile-grid">
        
          <div class="card">
            <div class="card-header">
              <span>üêæ <strong>OpenClaw Gateway</strong></span>
              <span class="badge badge-complete">complete</span>
            </div>
            <div class="detail">Open-source multi-channel AI gateway replaces custom Discord bot. Gains: WhatsApp, Telegram, Signal, iMessage, Teams, browser automation, voice.</div>
            <div style="margin-top:0.5rem;font-size:0.8rem">
              <span class="mono">thetadrivencoach/openclaw/ (custom discord.js bot)</span> &rarr; <span class="mono">intentguard/node_modules/openclaw (v2026.2.13)</span>
            </div>
            <div style="margin-top:0.3rem"><span class="badge badge-low">risk: low</span></div>
          </div>
        
          <div class="card">
            <div class="card-header">
              <span>üí¨ <strong>Discord Integration</strong></span>
              <span class="badge badge-building">building</span>
            </div>
            <div class="detail">Custom bot commands (!ping, !stop, !status, !tasks, !history, !clear, !rooms) + cognitive room channel mapping + voice memo pipeline ‚Üí OpenClaw Discord channel adapter.</div>
            <div style="margin-top:0.5rem;font-size:0.8rem">
              <span class="mono">openclaw/src/runtime.ts (837 lines, discord.js v14)</span> &rarr; <span class="mono">intentguard/src/channels/discord.ts</span>
            </div>
            <div style="margin-top:0.3rem"><span class="badge badge-medium">risk: medium</span></div>
          </div>
        
          <div class="card">
            <div class="card-header">
              <span>üè† <strong>Cognitive Rooms</strong></span>
              <span class="badge badge-building">building</span>
            </div>
            <div class="detail">9 rooms: Builder(iTerm), Architect(VSCode), Operator(Kitty), Vault(WezTerm), Voice(Terminal), Laboratory(Cursor), Performer(Alacritty), Network(Messages), Navigator(Rio).</div>
            <div style="margin-top:0.5rem;font-size:0.8rem">
              <span class="mono">.workflow/rooms/ (9 HTML rooms + dashboard)</span> &rarr; <span class="mono">intentguard/src/rooms/</span>
            </div>
            <div style="margin-top:0.3rem"><span class="badge badge-high">risk: high</span></div>
          </div>
        
          <div class="card">
            <div class="card-header">
              <span>üé§ <strong>Voice Memo Pipeline</strong></span>
              <span class="badge badge-done">done</span>
            </div>
            <div class="detail">Discord voice memos ‚Üí FFmpeg ‚Üí transcription (Whisper‚ÜíAnthropic‚ÜíClaude CLI cascade) ‚Üí categorization ‚Üí tesseract training. ‚úÖ Complete with tests.</div>
            <div style="margin-top:0.5rem;font-size:0.8rem">
              <span class="mono">intentguard/src/skills/voice-memo-reactor.ts</span> | 249 LOC + 438 LOC tests
            </div>
            <div style="margin-top:0.3rem"><span class="badge badge-medium">risk: medium</span> <span class="badge badge-done">migrated 2026-02-15</span></div>
          </div>
        
          <div class="card">
            <div class="card-header">
              <span>üåä <strong>Claude Flow Bridge</strong></span>
              <span class="badge badge-pending">pending</span>
            </div>
            <div class="detail">Bidirectional pipe: Discord ‚Üî Claude Code terminals. Room-aware dispatch, STDIN forwarding, background process management, output capture.</div>
            <div style="margin-top:0.5rem;font-size:0.8rem">
              <span class="mono">openclaw/skills/claude-flow-bridge.ts</span> &rarr; <span class="mono">intentguard/src/skills/claude-flow-bridge.ts</span>
            </div>
            <div style="margin-top:0.3rem"><span class="badge badge-high">risk: high</span></div>
          </div>
        
          <div class="card">
            <div class="card-header">
              <span>üìä <strong>Trust-Debt Pipeline</strong></span>
              <span class="badge badge-complete">complete</span>
            </div>
            <div class="detail">8-step pipeline: outcomes‚Üíkeywords‚Üícategories(20)‚Üípresence-matrix‚Üígrades‚Üítimeline‚Üínarratives‚Üíaudit. Queen orchestrator + SQLite DB.</div>
            <div style="margin-top:0.5rem;font-size:0.8rem">
              <span class="mono">intentguard/ (already here ‚Äî 0-7 JSON pipeline)</span> &rarr; <span class="mono">intentguard/src/pipeline/</span>
            </div>
            <div style="margin-top:0.3rem"><span class="badge badge-low">risk: low</span></div>
          </div>
        
          <div class="card">
            <div class="card-header">
              <span>üîê <strong>FIM Geometric Auth (IAMFIM)</strong></span>
              <span class="badge badge-building">building</span>
            </div>
            <div class="detail">Fractal Identity Map permissions. Tensor overlap model. CRITICAL: Currently pseudocode only ‚Äî needs actual math implementation with tests.</div>
            <div style="margin-top:0.5rem;font-size:0.8rem">
              <span class="mono">intentguard/src/ (trust-debt math)</span> &rarr; <span class="mono">intentguard/src/auth/geometric.ts</span>
            </div>
            <div style="margin-top:0.3rem"><span class="badge badge-critical">risk: critical</span></div>
          </div>
        
          <div class="card">
            <div class="card-header">
              <span>ü§ù <strong>CRM MCP Server</strong></span>
              <span class="badge badge-pending">pending</span>
            </div>
            <div class="detail">8 CRM tools: list/get/create/update leads, create/update cards, update checklist, next. Supabase backend.</div>
            <div style="margin-top:0.5rem;font-size:0.8rem">
              <span class="mono">packages/crm-mcp/ (thetacoach-crm npm)</span> &rarr; <span class="mono">intentguard/src/mcp/crm.ts</span>
            </div>
            <div style="margin-top:0.3rem"><span class="badge badge-low">risk: low</span></div>
          </div>
        
          <div class="card">
            <div class="card-header">
              <span>üßä <strong>Tesseract Grid</strong></span>
              <span class="badge badge-pending">pending</span>
            </div>
            <div class="detail">3x3 coordinate namespace. Deep-link purchase flows. Headless version for bot to query/update grid state at tesseract.nu.</div>
            <div style="margin-top:0.5rem;font-size:0.8rem">
              <span class="mono">src/app/tesseract/ (Next.js pages)</span> &rarr; <span class="mono">intentguard/src/tesseract/</span>
            </div>
            <div style="margin-top:0.3rem"><span class="badge badge-medium">risk: medium</span></div>
          </div>
        
          <div class="card">
            <div class="card-header">
              <span>‚öîÔ∏è <strong>Battle Cards ‚Üí OpenClaw Skills</strong></span>
              <span class="badge badge-planned">planned</span>
            </div>
            <div class="detail">Convert Challenger methodology battle cards to OpenClaw SKILL.md format.</div>
            <div style="margin-top:0.5rem;font-size:0.8rem">
              <span class="mono">docs/05-content/battle-cards/</span> &rarr; <span class="mono">intentguard/skills/battle-cards/</span>
            </div>
            <div style="margin-top:0.3rem"><span class="badge badge-low">risk: low</span></div>
          </div>
        
          <div class="card">
            <div class="card-header">
              <span>üåô <strong>Overnight Reports</strong></span>
              <span class="badge badge-building">building</span>
            </div>
            <div class="detail">Always-on Mac Mini generates overnight intelligence reports. HTML summaries = CEO morning briefing.</div>
            <div style="margin-top:0.5rem;font-size:0.8rem">
              <span class="mono">openclaw/data/overnight-reports/</span> &rarr; <span class="mono">intentguard/data/overnight-reports/</span>
            </div>
            <div style="margin-top:0.3rem"><span class="badge badge-low">risk: low</span></div>
          </div>
        
      </div>
    </section>
  
    <section>
      <h2>Cognitive Rooms ‚Üí Discord Channels</h2>
      <div class="tile-grid">
        
          <div class="card" style="border-left:3px solid #3b82f6">
            <div class="card-header">
              <span>üî® <strong>Builder</strong></span>
              <span class="mono">C1 Grid:Law</span>
            </div>
            <div class="detail">Terminal: iTerm2 | IPC: applescript</div>
            <div style="margin-top:0.5rem;font-size:0.8rem">
              <strong>Sees:</strong> Code architecture, Build systems, Feature implementation, Bug fixes<br>
              <strong>Ignores:</strong> Sales strategy, Legal review, Demo scripts<br>
              <strong>Handoff:</strong> üìê::architect (Architecture question), üé©::operator (Deploy this)
            </div>
          </div>
        
          <div class="card" style="border-left:3px solid #4f46e5">
            <div class="card-header">
              <span>üìê <strong>Architect</strong></span>
              <span class="mono">A2 Law:Opportunity</span>
            </div>
            <div class="detail">Terminal: VS Code | IPC: system-events</div>
            <div style="margin-top:0.5rem;font-size:0.8rem">
              <strong>Sees:</strong> Strategic sequencing, System design, Pricing strategy, GTM directives<br>
              <strong>Ignores:</strong> Implementation details, CRM stages, Voice content<br>
              <strong>Handoff:</strong> üî®::builder (Implement this design), üé©::operator (Execute outreach)
            </div>
          </div>
        
          <div class="card" style="border-left:3px solid #22c55e">
            <div class="card-header">
              <span>üé© <strong>Operator</strong></span>
              <span class="mono">C3 Grid:Signal</span>
            </div>
            <div class="detail">Terminal: Kitty | IPC: kitty-socket</div>
            <div style="margin-top:0.5rem;font-size:0.8rem">
              <strong>Sees:</strong> CRM stages, Deal velocity, Battle cards, Outreach copy<br>
              <strong>Ignores:</strong> Code architecture, Strategic sequencing, Patent language<br>
              <strong>Handoff:</strong> üìê::architect (Strategy question), üî®::builder (Feature request)
            </div>
          </div>
        
          <div class="card" style="border-left:3px solid #ef4444">
            <div class="card-header">
              <span>üîí <strong>Vault</strong></span>
              <span class="mono">A1 Law:Law</span>
            </div>
            <div class="detail">Terminal: WezTerm | IPC: wezterm-cli</div>
            <div style="margin-top:0.5rem;font-size:0.8rem">
              <strong>Sees:</strong> Contracts, Legal language, Patent claims, Compliance<br>
              <strong>Ignores:</strong> Sales tactics, Code, Content creation<br>
              <strong>Handoff:</strong> üìê::architect (Strategic review), üé©::operator (Contract ready)
            </div>
          </div>
        
          <div class="card" style="border-left:3px solid #a855f7">
            <div class="card-header">
              <span>üé§ <strong>Voice</strong></span>
              <span class="mono">B1 Opp:Law</span>
            </div>
            <div class="detail">Terminal: Terminal.app | IPC: applescript</div>
            <div style="margin-top:0.5rem;font-size:0.8rem">
              <strong>Sees:</strong> Content creation, LinkedIn posts, Thought leadership, Warm leads<br>
              <strong>Ignores:</strong> Code, Legal, Deployment<br>
              <strong>Handoff:</strong> üé©::operator (Warm lead from post), üìê::architect (Content strategy)
            </div>
          </div>
        
          <div class="card" style="border-left:3px solid #06b6d4">
            <div class="card-header">
              <span>üß™ <strong>Laboratory</strong></span>
              <span class="mono">C2 Grid:Opportunity</span>
            </div>
            <div class="detail">Terminal: Cursor | IPC: system-events</div>
            <div style="margin-top:0.5rem;font-size:0.8rem">
              <strong>Sees:</strong> Experiments, A/B tests, Research, Prototypes<br>
              <strong>Ignores:</strong> Production code, Sales, Legal<br>
              <strong>Handoff:</strong> üî®::builder (Experiment succeeded, productionize), üìê::architect (Research findings)
            </div>
          </div>
        
          <div class="card" style="border-left:3px solid #f59e0b">
            <div class="card-header">
              <span>üé≠ <strong>Performer</strong></span>
              <span class="mono">A3 Law:Signal</span>
            </div>
            <div class="detail">Terminal: Alacritty | IPC: applescript</div>
            <div style="margin-top:0.5rem;font-size:0.8rem">
              <strong>Sees:</strong> Demo scripts, Presentations, Live performances, Video content<br>
              <strong>Ignores:</strong> Code, CRM, Research<br>
              <strong>Handoff:</strong> üé©::operator (Demo converted, close the deal), üìê::architect (Demo feedback)
            </div>
          </div>
        
          <div class="card" style="border-left:3px solid #6366f1">
            <div class="card-header">
              <span>‚òï <strong>Network</strong></span>
              <span class="mono">B2 Opp:Opportunity</span>
            </div>
            <div class="detail">Terminal: Messages | IPC: system-events</div>
            <div style="margin-top:0.5rem;font-size:0.8rem">
              <strong>Sees:</strong> Relationships, Introductions, Community, Warm connections<br>
              <strong>Ignores:</strong> Code, Legal, Experiments<br>
              <strong>Handoff:</strong> üé©::operator (Warm intro for deal), üé§::voice (Content collaboration)
            </div>
          </div>
        
          <div class="card" style="border-left:3px solid #0d9488">
            <div class="card-header">
              <span>üß≠ <strong>Navigator</strong></span>
              <span class="mono">B3 Opp:Signal</span>
            </div>
            <div class="detail">Terminal: Rio | IPC: system-events</div>
            <div style="margin-top:0.5rem;font-size:0.8rem">
              <strong>Sees:</strong> Context switching, Routing decisions, Exploration, Discovery<br>
              <strong>Ignores:</strong> Deep implementation, Closing deals, Legal review<br>
              <strong>Handoff:</strong> üìê::architect (Found strategic opportunity), üî®::builder (Found useful tool/library)
            </div>
          </div>
        
      </div>
      <div class="card" style="margin-top:1rem">
        <h3>IPC Risk Assessment</h3>
        
          <div style="margin:0.3rem 0;font-size:0.85rem">
            <span class="mono">applescript</span> ‚Äî Portable: &#10008; | Focus Required: &#10004; no | Reliability: high
          </div>
        
          <div style="margin:0.3rem 0;font-size:0.85rem">
            <span class="mono">kitty-socket</span> ‚Äî Portable: &#10008; | Focus Required: &#10004; no | Reliability: high
          </div>
        
          <div style="margin:0.3rem 0;font-size:0.85rem">
            <span class="mono">wezterm-cli</span> ‚Äî Portable: &#10008; | Focus Required: &#10004; no | Reliability: high
          </div>
        
          <div style="margin:0.3rem 0;font-size:0.85rem">
            <span class="mono">system-events</span> ‚Äî Portable: &#10008; | Focus Required: &#9888;&#65039; yes | Reliability: medium
          </div>
        
      </div>
    </section>
  
    <section>
      <h2>Tesseract Coordinate Grid</h2>
      <div class="grid-table">
        <div class="grid-header"></div>
        <div class="grid-header">Strategy (Law)</div><div class="grid-header">Tactics (Opportunity)</div><div class="grid-header">Operations (Signal)</div>
        
          <div class="grid-row-label">A (Law)</div>
          <div class="grid-cell ">‚öñÔ∏è<br><strong>Vault</strong><br><span class="detail">Law:Law</span></div><div class="grid-cell ">üîÆ<br><strong>Architect</strong><br><span class="detail">Law:Opp</span></div><div class="grid-cell ">üí∞<br><strong>Performer</strong><br><span class="detail">Law:Signal</span></div>
        
          <div class="grid-row-label">B (Opportunity)</div>
          <div class="grid-cell ">üîÄ<br><strong>Voice</strong><br><span class="detail">Opp:Law</span></div><div class="grid-cell ">üéØ<br><strong>Network</strong><br><span class="detail">Opp:Opp</span></div><div class="grid-cell ">üì°<br><strong>Navigator</strong><br><span class="detail">Opp:Signal</span></div>
        
          <div class="grid-row-label">C (Grid)</div>
          <div class="grid-cell ">üîå<br><strong>Builder</strong><br><span class="detail">Grid:Law</span></div><div class="grid-cell ">üß™<br><strong>Laboratory</strong><br><span class="detail">Grid:Opp</span></div><div class="grid-cell active">üåä<br><strong>Operator</strong><br><span class="detail">Grid:Signal</span></div>
        
      </div>
    </section>
  
    <section>
      <h2>Fractal Identity Map (IAMFIM)</h2>
      <div class="warn-box">
        <h3>CRITICAL: Pseudocode Only</h3>
        <div class="detail">The FIM auth layer exists only in this spec. No TypeScript. No tests. Must build standalone module with actual math before integrating.</div>
      </div>
      <div class="equation">Permission(user, action) = Identity_Fractal(user) ‚à© Coordinate_Required(action) ‚â• Sovereignty_Threshold</div>
      <h3>Action Requirements</h3>
      
        <div class="card">
          <div class="card-header">
            <span class="mono">shell_execute</span>
            <span class="badge badge-medium">min sovereignty: 0.6</span>
          </div>
          <div class="detail">Execute shell commands ‚Äî requires security and reliability trust</div>
          <div style="margin-top:0.3rem;font-size:0.8rem">Required: security >= 0.7, reliability >= 0.5</div>
        </div>
      
        <div class="card">
          <div class="card-header">
            <span class="mono">crm_update_lead</span>
            <span class="badge badge-medium">min sovereignty: 0.3</span>
          </div>
          <div class="detail">Update CRM lead ‚Äî moderate trust required</div>
          <div style="margin-top:0.3rem;font-size:0.8rem">Required: data_integrity >= 0.5, process_adherence >= 0.4</div>
        </div>
      
        <div class="card">
          <div class="card-header">
            <span class="mono">git_push</span>
            <span class="badge badge-medium">min sovereignty: 0.7</span>
          </div>
          <div class="detail">Push to git remote ‚Äî high trust required</div>
          <div style="margin-top:0.3rem;font-size:0.8rem">Required: code_quality >= 0.7, testing >= 0.6, security >= 0.5</div>
        </div>
      
      <h3>MCP Proxy Pseudocode</h3>
      <pre>async function interceptToolCall(call: ToolCall): Promise<ToolResult> {
  const identity = await getIdentityVector(call.session.userId);
  const requirement = getActionRequirement(call.toolName);

  if (!requirement) {
    // No requirement defined = allow (fail-open for undefined tools)
    return await openclaw.execute(call);
  }

  const overlap = computeOverlap(identity, requirement);

  if (overlap >= 0.8 && identity.sovereigntyScore >= requirement.minSovereignty) {
    await auditLog.record('ALLOWED', call, overlap);
    return await openclaw.execute(call);
  } else {
    await auditLog.record('DENIED', call, overlap);
    await trustDebtPipeline.recordDenial(call);
    return { error: 'FIM: Insufficient overlap', overlap, required: 0.8 };
  }
}</pre>
    </section>
  
    <section>
      <h2>Trust-Debt Pipeline</h2>
      <div class="detail" style="margin-bottom:1rem">8-step pipeline. Already built and working. This is the real asset.</div>
      
        <div class="card" style="padding:0.6rem 1rem">
          <span class="badge badge-done">Step 0</span>
          <strong style="margin-left:0.5rem">Outcome Requirements</strong>
          <span class="detail" style="margin-left:0.5rem">81 comprehensive outcome requirements extracted</span>
          <div class="mono" style="font-size:0.75rem">0-outcome-requirements.json</div>
        </div>
      
        <div class="card" style="padding:0.6rem 1rem">
          <span class="badge badge-done">Step 1</span>
          <strong style="margin-left:0.5rem">Indexed Keywords</strong>
          <span class="detail" style="margin-left:0.5rem">Keywords extracted from outcomes</span>
          <div class="mono" style="font-size:0.75rem">1-indexed-keywords.json</div>
        </div>
      
        <div class="card" style="padding:0.6rem 1rem">
          <span class="badge badge-done">Step 2</span>
          <strong style="margin-left:0.5rem">20 Categories (Balanced)</strong>
          <span class="detail" style="margin-left:0.5rem">Orthogonal category system with balanced weights</span>
          <div class="mono" style="font-size:0.75rem">2-categories-balanced.json</div>
        </div>
      
        <div class="card" style="padding:0.6rem 1rem">
          <span class="badge badge-done">Step 3</span>
          <strong style="margin-left:0.5rem">Presence Matrix</strong>
          <span class="detail" style="margin-left:0.5rem">Category presence per outcome requirement</span>
          <div class="mono" style="font-size:0.75rem">3-presence-matrix.json</div>
        </div>
      
        <div class="card" style="padding:0.6rem 1rem">
          <span class="badge badge-done">Step 4</span>
          <strong style="margin-left:0.5rem">Grades & Statistics</strong>
          <span class="detail" style="margin-left:0.5rem">Letter grades per category with statistical analysis</span>
          <div class="mono" style="font-size:0.75rem">4-grades-statistics.json</div>
        </div>
      
        <div class="card" style="padding:0.6rem 1rem">
          <span class="badge badge-done">Step 5</span>
          <strong style="margin-left:0.5rem">Timeline History</strong>
          <span class="detail" style="margin-left:0.5rem">Historical progression of trust debt scores</span>
          <div class="mono" style="font-size:0.75rem">5-timeline-history.json</div>
        </div>
      
        <div class="card" style="padding:0.6rem 1rem">
          <span class="badge badge-done">Step 6</span>
          <strong style="margin-left:0.5rem">Analysis Narratives</strong>
          <span class="detail" style="margin-left:0.5rem">Human-readable analysis of each category</span>
          <div class="mono" style="font-size:0.75rem">6-analysis-narratives.json</div>
        </div>
      
        <div class="card" style="padding:0.6rem 1rem">
          <span class="badge badge-done">Step 7</span>
          <strong style="margin-left:0.5rem">Audit Log</strong>
          <span class="detail" style="margin-left:0.5rem">Full audit trail of pipeline execution</span>
          <div class="mono" style="font-size:0.75rem">7-audit-log.json</div>
        </div>
      
      <h3>Agents</h3>
      
        <div style="margin:0.3rem 0;font-size:0.85rem">
          <span class="badge badge-active">active</span>
          <strong style="margin-left:0.5rem">Agent 1</strong> ‚Äî Extract keywords from outcome requirements
          <span class="mono" style="margin-left:0.5rem">agent-1-keyword-extractor.js</span>
        </div>
      
        <div style="margin:0.3rem 0;font-size:0.85rem">
          <span class="badge badge-active">active</span>
          <strong style="margin-left:0.5rem">Agent 2</strong> ‚Äî Validate pipeline health
          <span class="mono" style="margin-left:0.5rem">agent2-process-health-validator.js</span>
        </div>
      
        <div style="margin:0.3rem 0;font-size:0.85rem">
          <span class="badge badge-active">active</span>
          <strong style="margin-left:0.5rem">Agent 3</strong> ‚Äî Calculate presence matrix
          <span class="mono" style="margin-left:0.5rem">agent3-matrix-calculation-engine.js</span>
        </div>
      
        <div style="margin:0.3rem 0;font-size:0.85rem">
          <span class="badge badge-active">active</span>
          <strong style="margin-left:0.5rem">Agent 4</strong> ‚Äî Validate integration
          <span class="mono" style="margin-left:0.5rem">agent4-integration-validator.js</span>
        </div>
      
        <div style="margin:0.3rem 0;font-size:0.85rem">
          <span class="badge badge-active">active</span>
          <strong style="margin-left:0.5rem">Agent 6</strong> ‚Äî Full analysis narratives
          <span class="mono" style="margin-left:0.5rem">comprehensive-trust-debt-analysis.js</span>
        </div>
      
        <div style="margin:0.3rem 0;font-size:0.85rem">
          <span class="badge badge-active">active</span>
          <strong style="margin-left:0.5rem">Agent 7</strong> ‚Äî Final validation + audit
          <span class="mono" style="margin-left:0.5rem">agent7-validation.js</span>
        </div>
      
        <div style="margin:0.3rem 0;font-size:0.85rem">
          <span class="badge badge-active">active</span>
          <strong style="margin-left:0.5rem">Queen</strong> ‚Äî Orchestrator ‚Äî runs all agents in sequence
          <span class="mono" style="margin-left:0.5rem">unified-trust-debt-pipeline.js</span>
        </div>
      
    </section>
  
    <section>
      <h2>Skills Inventory</h2>
      <div class="tile-grid">
        
          <div class="card">
            <div class="card-header">
              <strong>voice-memo-reactor</strong>
              <span class="badge badge-done">done</span>
            </div>
            <div class="detail">Detects Discord voice memos, downloads audio, FFmpeg transcoding, transcription (Whisper‚ÜíAnthropic‚ÜíClaude CLI cascade), categorization, corpus storage. ‚úÖ Migrated with comprehensive test suite.</div>
            <div style="margin-top:0.5rem;font-size:0.8rem">
              <span class="mono">intentguard/src/skills/voice-memo-reactor.ts</span> | 249 LOC + 438 LOC tests
            </div>
            <div class="detail" style="margin-top:0.3rem">Voice pipeline core UX complete with Whisper cascade, Discord formatting, tesseract training integration.</div>
          </div>
        
          <div class="card">
            <div class="card-header">
              <strong>claude-flow-bridge</strong>
              <span class="badge badge-converting">converting</span>
            </div>
            <div class="detail">Bidirectional Claude Code ‚Üî Discord. 9 terminal configs, IPC dispatch, STDIN forwarding, background processes, output capture.</div>
            <div style="margin-top:0.5rem;font-size:0.8rem">
              <span class="mono">openclaw/skills/claude-flow-bridge.ts</span> | ~500 LOC
            </div>
            <div class="detail" style="margin-top:0.3rem">Core orchestration. Wrap as MCP proxy. Most complex skill.</div>
          </div>
        
          <div class="card">
            <div class="card-header">
              <strong>llm-controller</strong>
              <span class="badge badge-pending">pending</span>
            </div>
            <div class="detail">Multi-model routing: Whisper ‚Üí Anthropic API ‚Üí Claude CLI. Transcription + generation backends.</div>
            <div style="margin-top:0.5rem;font-size:0.8rem">
              <span class="mono">openclaw/skills/llm-controller.ts</span> | ~300 LOC
            </div>
            <div class="detail" style="margin-top:0.3rem">OpenClaw has native model router. Evaluate overlap before porting.</div>
          </div>
        
          <div class="card">
            <div class="card-header">
              <strong>system-control</strong>
              <span class="badge badge-done">‚úì done</span>
            </div>
            <div class="detail">macOS native: mouse, keyboard, screen capture, browser tabs, app management, clipboard.</div>
            <div style="margin-top:0.5rem;font-size:0.8rem">
              <span class="mono">openclaw/skills/system-control.ts</span> | ~400 LOC ‚Üí <strong>IntentGuard: src/skills/system-control.ts (481 LOC) + tests (433 LOC)</strong>
            </div>
            <div class="detail" style="margin-top:0.3rem">‚úì Ported with comprehensive test suite covering all macOS native controls (80+ test cases)</div>
          </div>

          <div class="card">
            <div class="card-header">
              <strong>tesseract-trainer</strong>
              <span class="badge badge-pending">pending</span>
            </div>
            <div class="detail">Feed attention signals into geometric IAM training corpus. 12-category grid, emoji weighting, Supabase pointers.</div>
            <div style="margin-top:0.5rem;font-size:0.8rem">
              <span class="mono">openclaw/skills/tesseract-trainer.ts</span> | ~200 LOC
            </div>
            <div class="detail" style="margin-top:0.3rem">Keep as standalone module. Connect via MCP.</div>
          </div>
        
          <div class="card">
            <div class="card-header">
              <strong>thetasteer-categorize</strong>
              <span class="badge badge-pending">pending</span>
            </div>
            <div class="detail">Map content to 12-category tesseract grid. Cascading backends: ThetaSteer daemon ‚Üí Ollama ‚Üí fallback.</div>
            <div style="margin-top:0.5rem;font-size:0.8rem">
              <span class="mono">openclaw/skills/thetasteer-categorize.ts</span> | ~150 LOC
            </div>
            <div class="detail" style="margin-top:0.3rem">Keep as standalone. Confidence tiers: GREEN/RED/BLUE.</div>
          </div>
        
          <div class="card">
            <div class="card-header">
              <strong>CRM tools (8)</strong>
              <span class="badge badge-keep-as-mcp">keep-as-mcp</span>
            </div>
            <div class="detail">Lead management, battle cards, Challenger methodology. Supabase backend.</div>
            <div style="margin-top:0.5rem;font-size:0.8rem">
              <span class="mono">packages/crm-mcp/src/</span> | ~800 LOC
            </div>
            <div class="detail" style="margin-top:0.3rem">Already works as MCP server. Connect via proxy, do not rewrite.</div>
          </div>
        
          <div class="card">
            <div class="card-header">
              <strong>Book Revisions (3)</strong>
              <span class="badge badge-low-priority">low-priority</span>
            </div>
            <div class="detail">Track editorial changes, mark applied, generate reports.</div>
            <div style="margin-top:0.5rem;font-size:0.8rem">
              <span class="mono">packages/book-revisions-mcp/src/</span> | ~200 LOC
            </div>
            <div class="detail" style="margin-top:0.3rem">Low value for bot CEO. Migrate last.</div>
          </div>
        
      </div>
    </section>
  
    <section>
      <h2>Phased Implementation</h2>
      
        <div class="card ">
          <h3>Phase 0 ‚Äî Foundation</h3>
          <div class="detail" style="margin-bottom:0.5rem">OpenClaw + IntentGuard Wrapper (minimal)</div>
          <ul class="checklist">
            <li class="check-done">Install openclaw@2026.2.13 as npm dependency</li><li class="check-done">Verify Node 24.13.1 compatibility</li><li class="check-done">Build migration spec HTML (this document)</li><li class="check-done">Create modular TSX section files</li><li class="check-done">Run openclaw onboard --install-daemon</li><li class="check-done">Create intentguard/src/wrapper.ts (minimal parent process)</li><li class="check-done">Build spec/render.tsx (compile sections to HTML)</li><li class="check-done">Create intentguard.json config</li><li class="check-done">Build scripts/bootstrap.sh</li><li class="check-done">Test: OpenClaw starts as child process</li>
          </ul>
        </div>
      
        <div class="card ">
          <h3>Phase 1 ‚Äî Discord + Rooms</h3>
          <div class="detail" style="margin-bottom:0.5rem">Migrate Cognitive Rooms to OpenClaw Channels</div>
          <ul class="checklist">
            <li class="check-done">Map 9 rooms to OpenClaw channel adapters</li><li class="check-done">Port channel-manager.ts with #trust-debt-public</li><li class="check-done">Port task-store.ts (JSONL persistence)</li><li class="check-done">Port room context + handoff rules to IntentGuard config</li><li class="check-done">Implement bot commands (!ping, !stop, !status, !tasks, !rooms, !handles, !trust)</li><li class="check-done">Build authorized-handles.ts (thetaking, mortarcombat = instant-execute)</li><li class="check-done">Build transparency-engine.ts (public trust-debt reporting)</li><li class="check-done">Port voice-memo-reactor.ts</li><li class="check-done">Port claude-flow-bridge.ts (headless dispatch)</li><li class="check-done">Port thetasteer-categorize.ts (with IAMFIM trust mapping)</li><li class="check-done">Port llm-controller.ts (Whisper + Ollama + Sonnet)</li><li class="check-done">Build src/runtime.ts (main orchestrator)</li><li class="check-done">Build src/types.ts (shared types)</li><li class="check-done">Wire outbound email via thetadriven.com API</li><li class="check-done">Build steering-loop.ts (Ask-and-Predict protocol)</li><li class="check-done">Build tweet-composer.ts (280-char Discord updates)</li><li class="check-done">Wire steering loop into runtime.ts</li><li class="check-done">Add #tesseract-nu game channel</li><li class="check-done">Sovereignty-based countdown (5s/30s/60s)</li><li class="check-done">Admin thumbs-up blessing for non-admin suggestions</li><li class="check-done">Port trust-debt pipeline steps 0-7</li><li class="check-done">Pipeline runner with FIM identity update</li><li class="check-done">Bot commands: !predictions, !abort, !tweet, !sovereignty, !pipeline</li><li class="check-done">Tweet cross-post reactions (üê¶ ‚Üí Twitter, üîÑ ‚Üí #tesseract-nu)</li><li class="check-done">Test bidirectional Discord ‚Üî terminal pipe</li><li class="check-done">Fill .env and test full Discord round-trip</li>
          </ul>
        </div>
      
        <div class="card ">
          <h3>Phase 2 ‚Äî FIM Auth (Standalone First)</h3>
          <div class="detail" style="margin-bottom:0.5rem">Build geometric permission module with tests BEFORE integrating</div>
          <ul class="checklist">
            <li class="check-done">Define vector space (20 trust-debt categories as dimensions)</li><li class="check-done">Implement computeOverlap() with concrete math</li><li class="check-done">Write unit tests: allowed/denied scenarios with real numbers</li><li class="check-done">Benchmark: latency of overlap computation</li><li class="check-done">Build MCP proxy interceptor (OpenClaw plugin hook)</li><li class="check-done">Define action coordinate map (tool ‚Üí required scores)</li><li class="check-done">Integration test: proxy intercepts tool call, checks FIM, forwards</li>
          </ul>
        </div>
      
        <div class="card ">
          <h3>Phase 3 ‚Äî Multi-Channel + X Publishing</h3>
          <div class="detail" style="margin-bottom:0.5rem">Expand beyond Discord, browser-based X/Twitter posting</div>
          <ul class="checklist">
            <li class="check-done">Add #x-posts Discord channel for tweet staging</li><li class="check-done">Build x-poster.ts (Claude Flow browser automation ‚Üí X/Twitter)</li><li class="check-done">Wire thumbs-up reaction on #x-posts to browser publish to X</li><li class="check-done">Forward all tweet-composer output to #x-posts as drafts</li><li class="check-done">Build always-running CEO loop with infinite watch mode</li><li class="check-done">Build src/cron/scheduler.ts Night Shift (proactive task injection)</li><li class="check-done">Wire scheduler to steering loop with risk classification</li><li class="check-done">Define safe vs dangerous task whitelist with sovereignty gating</li><li class="check-todo">Add Claude Flow agent pool (50 concurrent) for task subdivision</li><li class="check-done">Wire CEO loop idle mode: scan spec every 60s for new todos</li><li class="check-done">Auto-commit completed work from CEO loop</li><li class="check-done">Discord status heartbeat every 5 minutes when idle</li><li class="check-done">Enable WhatsApp channel adapter</li><li class="check-done">Enable Telegram channel adapter</li><li class="check-todo">Test cross-channel room routing</li><li class="check-done">Deploy as always-on daemon on Mac Mini</li><li class="check-done">Create src/channels/whatsapp-adapter.ts skeleton with WhatsApp Web.js</li><li class="check-done">Wire WhatsApp adapter to channel-manager.ts</li><li class="check-done">Test WhatsApp message receive and reply</li><li class="check-done">Create src/channels/telegram-adapter.ts skeleton with node-telegram-bot-api</li><li class="check-done">Wire Telegram adapter to channel-manager.ts</li><li class="check-done">Test Telegram message receive and reply</li>
          </ul>
        </div>
      
        <div class="card ">
          <h3>Phase 4 ‚Äî Tesseract Grid Integration (Reality Bridge)</h3>
          <div class="detail" style="margin-bottom:0.5rem">Map real company state to 12-cell tesseract grid ‚Äî the Ops-Board</div>
          <ul class="checklist">
            <li class="check-done">Create tesseract-client.ts HTTP client for tesseract.nu API</li><li class="check-done">Map 12 grid cells to real company metrics (server load, deal flow, legal)</li><li class="check-done">Build grid-state-reader.ts: fetch current cell pressures from tesseract.nu</li><li class="check-done">Build grid-state-writer.ts: push pointer events from bot actions</li><li class="check-done">Wire task completions to POINTER_CREATE events on grid</li><li class="check-done">Grid state to room routing: hot cells prioritize dispatches</li><li class="check-todo">Deep-link generation from bot conversations to grid cells</li><li class="check-done">Add #ops-board Discord channel showing live grid heatmap</li><li class="check-todo">Build ASCII grid renderer for Discord (12-cell with heat colors)</li><li class="check-done">Add !grid command showing current tesseract state</li>
          </ul>
        </div>
      
        <div class="card future-phase">
          <h3>Phase 5 ‚Äî Open Playground</h3>
          <div class="detail" style="margin-bottom:0.5rem">Public IAMFIM implementation playground</div>
          <ul class="checklist">
            <li class="check-todo">Open-source the FIM auth layer</li><li class="check-todo">Publish IntentGuard as npm package</li><li class="check-todo">Host tesseract.nu playground through bot</li>
          </ul>
        </div>
      
        <div class="card ">
          <h3>Phase 6 ‚Äî Economic Sovereignty (Wallet Skill)</h3>
          <div class="detail" style="margin-bottom:0.5rem">Give the Headless CEO its own P&L ‚Äî from Trust to Solvency</div>
          <ul class="checklist">
            <li class="check-done">Create src/skills/wallet.ts skeleton with balance tracking</li><li class="check-done">Define wallet schema: income sources, expense categories, limits</li><li class="check-todo">Wire FIM sovereignty score to spending limits (high trust = high limit)</li><li class="check-todo">Track inference costs per task (Ollama electricity estimate, API credits)</li><li class="check-todo">Build cost reporter: daily/weekly P&L to #trust-debt-public</li><li class="check-todo">Create wallet-ledger.ts: JSONL append-only transaction log</li><li class="check-done">Add !wallet command showing balance, income, expenses</li><li class="check-done">Wire ShortRank A3 Strategy.Fund cell to wallet events</li><li class="check-done">Budget alerts when spending exceeds sovereignty-adjusted threshold</li><li class="check-todo">Build revenue intake stub: placeholder for future crypto/service income</li>
          </ul>
        </div>
      
        <div class="card ">
          <h3>Phase 7 ‚Äî Physical Manifestation (Artifact Skill)</h3>
          <div class="detail" style="margin-bottom:0.5rem">Make Trust tangible ‚Äî sovereign geometry to 3D artifacts</div>
          <ul class="checklist">
            <li class="check-done">Create src/skills/artifact-generator.ts skeleton</li><li class="check-done">Map 20-dim identity vector to geometric mesh parameters</li><li class="check-todo">Build sovereignty-to-geometry converter (high trust = smooth, low = jagged)</li><li class="check-todo">Generate .stl file from current geometric state</li><li class="check-todo">Wire sovereignty score monitoring: trigger artifact on 30-day stability</li><li class="check-todo">Post artifact preview (ASCII art) to #trust-debt-public on generation</li><li class="check-done">Add !artifact command to manually generate current-state STL</li><li class="check-done">Wire ShortRank C3 Operations.Flow cell to artifact generation events</li><li class="check-todo">Store artifact history in data/artifacts/ with timestamped filenames</li><li class="check-todo">Build artifact comparison: diff two geometric states visually</li>
          </ul>
        </div>
      
        <div class="card ">
          <h3>Phase 8 ‚Äî Fractal Federation (Handshake Protocol)</h3>
          <div class="detail" style="margin-bottom:0.5rem">Bot-to-bot trust via tensor overlap ‚Äî Web of Trust from math</div>
          <ul class="checklist">
            <li class="check-done">Define handshake protocol spec: identity vector exchange format</li><li class="check-done">Build src/federation/handshake.ts: swap identity fractals between bots</li><li class="check-todo">Implement tensor overlap calculation between two distinct geometries</li><li class="check-done">Define trust threshold (0.8 overlap = open channel, below = reject)</li><li class="check-todo">Build secure channel opener: encrypted pipe between compatible bots</li><li class="check-todo">Create federation registry: known bots with last-seen geometry hashes</li><li class="check-todo">Wire drift detection to auto-quarantine: geometry no longer fits network</li><li class="check-done">Add !federation command showing known bots and overlap scores</li><li class="check-todo">Build federation heartbeat: periodic geometry sync with peers</li><li class="check-done">Wire ShortRank B2 Tactics.Deal cell to federation handshake events</li>
          </ul>
        </div>
      
        <div class="card ">
          <h3>Phase 9 ‚Äî Autonomous Night Operations</h3>
          <div class="detail" style="margin-bottom:0.5rem">Always-on proactive CEO that makes progress while you sleep</div>
          <ul class="checklist">
            <li class="check-done">Rewrite CEO loop for infinite operation with idle watch mode</li><li class="check-done">Build task auto-subdivider: break vague todos into 3-5 concrete subtasks</li><li class="check-todo">Wire Claude Flow agent pool for parallel task execution</li><li class="check-todo">Build progress tracker: completed/total/blocked counts per phase</li><li class="check-done">Implement priority scoring: urgency x impact x dependency-free</li><li class="check-done">Add git auto-commit after each completed task batch</li><li class="check-done">Build nightly summary tweet: what was accomplished while you slept</li><li class="check-done">Wire CEO loop to spec watcher: inotify/fswatch for spec changes</li><li class="check-done">Add circuit breaker: stop after 3 consecutive failures</li><li class="check-done">Build !ceo-status command showing loop state, queue depth, completion rate</li>
          </ul>
        </div>
      
    </section>
  
    <section>
      <h2>Repo Split Guide</h2>
      <div class="split-cols">
        <div>
          <h3>thetadrivencoach (Website/Game)</h3>
          <ul class="checklist">
            <li class="check-done">Next.js app (src/app/) ‚Äî thetadriven.com</li><li class="check-done">Blog posts (src/content/blog/) ‚Äî 267 posts</li><li class="check-done">Book chapters (public/book/) ‚Äî Tesseract Physics</li><li class="check-done">Tesseract grid UI (src/app/tesseract/) ‚Äî tesseract.nu</li><li class="check-done">MCPHeraldicCrest component</li><li class="check-done">Vercel deployment (auto-deploy on push)</li><li class="check-done">MDX validation scripts</li><li class="check-done">build-book-html.sh</li><li class="check-done">FIM artifact generation (3D printing scripts)</li><li class="check-done">Static .workflow/ room HTML pages</li><li class="check-done">CRM MCP server (thetacoach-crm-mcp npm)</li><li class="check-done">MCP init scripts (103 tools)</li>
          </ul>
        </div>
        <div>
          <h3>intentguard (Bot CEO)</h3>
          <ul class="checklist">
            <li class="check-done">OpenClaw gateway (npm dep, child process)</li><li class="check-done">IntentGuard wrapper.ts (Cortex+Body unified entry)</li><li class="check-done">FIM geometric auth layer (20-dim, 0.0004ms overlap)</li><li class="check-done">Trust-Debt Pipeline (8 steps, JSONL persistence)</li><li class="check-done">Discord bot (9 cognitive rooms + #x-posts + #ops-board)</li><li class="check-done">Voice memo reactor (Whisper transcription)</li><li class="check-done">Claude Flow bridge (headless dispatch)</li><li class="check-done">Steering loop (Ask-and-Predict protocol)</li><li class="check-done">Tweet composer + X-poster (browser automation)</li><li class="check-done">CEO loop v2 (always-on, auto-subdivide, circuit breaker)</li><li class="check-done">Night Shift scheduler (Ghost User proactive injection)</li><li class="check-done">LLM controller (Whisper + Ollama + Sonnet 3-tier)</li><li class="check-done">ThetaSteer categorize (20 trust-debt dimensions)</li><li class="check-done">Wallet skill (balance tracking skeleton)</li><li class="check-done">Artifact generator skill (FIM ‚Üí 3D mesh)</li><li class="check-done">Federation handshake (bot-to-bot trust)</li><li class="check-done">Grid state reader/writer (tesseract.nu bridge)</li><li class="check-done">WhatsApp adapter skeleton</li><li class="check-done">Telegram adapter skeleton</li><li class="check-done">Multi-channel wiring to channel-manager</li><li class="check-todo">Claude Flow agent pool (50 concurrent)</li><li class="check-done">Always-on daemon (launchd plist)</li>
          </ul>
        </div>
      </div>
    </section>
  
    <section>
      <h2>Debate Notes ‚Äî FOR/AGAINST</h2>
      <div class="stats-bar">
        <span><span class="badge badge-critical">critical: 1</span></span><span><span class="badge badge-high">high: 3</span></span><span><span class="badge badge-medium">medium: 2</span></span><span><span class="badge badge-low">low: 3</span></span><span><span class="badge badge-resolved">resolved: 1</span></span>
      </div>
      
        <div class="finding resolved">
          <div class="card-header">
            <span><strong>F01</strong> [skeptic] OpenClaw npm package does not exist</span>
            <span class="badge badge-resolved">resolved</span>
          </div>
          <div class="detail">Skeptic claimed openclaw was not on npm. This was incorrect.</div>
          <div style="margin-top:0.3rem;font-size:0.85rem;color:var(--accent)">RESOLVED: openclaw@2026.2.13 is installed and verified in node_modules. Binary works: npx openclaw --version returns 2026.2.13.</div>
        </div>
      
        <div class="finding critical">
          <div class="card-header">
            <span><strong>F02</strong> [skeptic] FIM tensor overlap = ZERO implementation</span>
            <span class="badge badge-critical">critical</span>
          </div>
          <div class="detail">The entire geometric permission system exists only as pseudocode in HTML. No TypeScript. No tests. No concrete vector space definition. The "Guard" in IntentGuard is vaporware.</div>
          <div style="margin-top:0.3rem;font-size:0.85rem;color:var(--accent)">ACCEPTED: Must build standalone module (intentguard/src/auth/geometric.ts) with actual math and tests BEFORE integrating. Phase 2 is now "FIM Auth Standalone First".</div>
        </div>
      
        <div class="finding high">
          <div class="card-header">
            <span><strong>F03</strong> [skeptic] MCP proxy interception has no standard pattern</span>
            <span class="badge badge-high">high</span>
          </div>
          <div class="detail">MCP defines tool registration, not tool interception. No documented middleware pattern exists. Proxy adds latency to every tool call.</div>
          <div style="margin-top:0.3rem;font-size:0.85rem;color:var(--accent)">INVESTIGATE: Check OpenClaw extension/middleware API before committing. May use WebSocket interception at ws://127.0.0.1:18789 instead.</div>
        </div>
      
        <div class="finding high">
          <div class="card-header">
            <span><strong>F04</strong> [skeptic] 9 rooms depend on 7 macOS apps ‚Äî not portable</span>
            <span class="badge badge-high">high</span>
          </div>
          <div class="detail">Terminal IPC via AppleScript/System Events works on exactly one Mac. System Events rooms require window focus and cannot run in parallel.</div>
          <div style="margin-top:0.3rem;font-size:0.85rem;color:var(--accent)">ACCEPTED RISK for Mac Mini deployment. Long-term: abstract IPC layer so rooms can work headlessly (tmux/screen) without macOS apps.</div>
        </div>
      
        <div class="finding medium">
          <div class="card-header">
            <span><strong>F05</strong> [skeptic] Two-repo split is premature</span>
            <span class="badge badge-medium">medium</span>
          </div>
          <div class="detail">Shared types between repos. Skill development spans both codebases. Integration testing becomes harder. Lockstep versioning needed.</div>
          <div style="margin-top:0.3rem;font-size:0.85rem;color:var(--accent)">MITIGATE: Publish shared types as @thetadriven/types npm package. Use workspace protocol for local dev.</div>
        </div>
      
        <div class="finding high">
          <div class="card-header">
            <span><strong>F06</strong> [skeptic] Migrating too much simultaneously</span>
            <span class="badge badge-high">high</span>
          </div>
          <div class="detail">Full platform migration + new auth system + new proxy layer + repo split ‚Äî all at once. Working system is 837 lines.</div>
          <div style="margin-top:0.3rem;font-size:0.85rem;color:var(--accent)">ACCEPTED: Revised plan to be incremental. Phase 0 is minimal (just wrapper + OpenClaw child). FIM builds standalone. Skills port one at a time.</div>
        </div>
      
        <div class="finding medium">
          <div class="card-header">
            <span><strong>F07</strong> [skeptic] Always-on Mac Mini = single point of failure</span>
            <span class="badge badge-medium">medium</span>
          </div>
          <div class="detail">No auto-scaling, no redundancy, hardware failure = total death, macOS updates can break AppleScript.</div>
          <div style="margin-top:0.3rem;font-size:0.85rem;color:var(--accent)">ACCEPTED for MVP. Mac Mini is the right choice for a single-user always-on bot. Cloud comes in Phase 5 if needed.</div>
        </div>
      
        <div class="finding low">
          <div class="card-header">
            <span><strong>A01</strong> [advocate] Wrapper > Fork (reversibility)</span>
            <span class="badge badge-low">low</span>
          </div>
          <div class="detail">If OpenClaw releases native geometric auth, we delete our shim. Fork commits to maintenance forever.</div>
          <div style="margin-top:0.3rem;font-size:0.85rem;color:var(--accent)">STRONG POINT: Two-way door. Keep.</div>
        </div>
      
        <div class="finding low">
          <div class="card-header">
            <span><strong>A02</strong> [advocate] Trust-debt pipeline is proven and working</span>
            <span class="badge badge-low">low</span>
          </div>
          <div class="detail">8 agents, 7 scripts, SQLite DB, full audit trail. This is the one real asset.</div>
          <div style="margin-top:0.3rem;font-size:0.85rem;color:var(--accent)">LEVERAGE: Make sovereignty score the input to FIM auth. Do not rewrite.</div>
        </div>
      
        <div class="finding low">
          <div class="card-header">
            <span><strong>A03</strong> [advocate] OpenClaw gives multi-channel for free</span>
            <span class="badge badge-low">low</span>
          </div>
          <div class="detail">WhatsApp, Telegram, Signal, iMessage, Teams ‚Äî all via npm dep, not custom code.</div>
          <div style="margin-top:0.3rem;font-size:0.85rem;color:var(--accent)">VALUE: This is why we chose OpenClaw over keeping custom discord.js.</div>
        </div>
      
    </section>
  
    <section>
      <h2>End-State Vision ‚Äî The Sovereign Engine</h2>
      <div class="detail" style="text-align:center;margin:1rem 0;font-style:italic">While you sleep, 50 Claude Flow agents operate in a highly subdivided, asynchronous swarm.<br>They are not bottlenecked by context limits because they work on the Modular TSX Spec.<br>Each agent pulls a single tile, cross-references 267 blog posts and 39 book sections via the<br>Tesseract Training Signal, and pushes a refined implementation. Every 10 minutes,<br>npx tsx spec/render.tsx fires, rebuilding the IntentGuard Migration Spec HTML.</div>
      <div class="stats-bar" style="margin:1.5rem 0">
        <span><span class="dot building"></span> Claude Flow Agents: <strong>50+</strong></span><span><span class="dot live"></span> TSX Spec Sections: <strong>17</strong></span><span><span class="dot live"></span> Blog Posts Indexed: <strong>267</strong></span><span><span class="dot live"></span> Book Sections: <strong>39</strong></span><span><span class="dot live"></span> Cognitive Rooms: <strong>9</strong></span><span><span class="dot live"></span> Discord Channels: <strong>11</strong></span><span><span class="dot live"></span> Registered Skills: <strong>6</strong></span><span><span class="dot live"></span> LLM Tiers: <strong>3</strong></span><span><span class="dot live"></span> Implementation Phases: <strong>10</strong></span><span><span class="dot building"></span> Spec Tasks Total: <strong>76+</strong></span>
      </div>
      
        <div class="card" style="border-left:3px solid var(--green)">
          <div class="card-header">
            <span>üß† <strong>The Cortex (IntentGuard)</strong></span>
            <span class="badge badge-complete">live</span>
          </div>
          <div class="detail">Parent Process ‚Äî Sovereignty Score Holder</div>
          <div style="margin-top:0.5rem">Holds the Fractal Identity Map and Trust-Debt Pipeline. The only component that knows the Sovereignty Score. Computes tensor overlap for every action. If the bot drifts, the Cortex catches it. NOW LIVE: wrapper.ts unified entry point with FIM plugin v2.0, Night Shift scheduler, CEO loop v2.</div>
        </div>
      
        <div class="card" style="border-left:3px solid var(--green)">
          <div class="card-header">
            <span>ü¶æ <strong>The Body (OpenClaw)</strong></span>
            <span class="badge badge-complete">live</span>
          </div>
          <div class="detail">Child Process ‚Äî Multi-Channel Gateway (npm openclaw@2026.2.13)</div>
          <div style="margin-top:0.5rem">Spawned by wrapper.ts as child process. Handles Discord (11 channels), WhatsApp, Telegram, Web UI, Email, X/Twitter. Connected via WebSocket parasite hook. 6 custom skills registered. Open-source and replaceable ‚Äî the Body is commodity.</div>
        </div>
      
        <div class="card" style="border-left:3px solid var(--green)">
          <div class="card-header">
            <span>üîê <strong>The Hook (IAMFIM)</strong></span>
            <span class="badge badge-complete">live</span>
          </div>
          <div class="detail">FIM Plugin ‚Äî Geometric Permission Gate (0.0004ms per check)</div>
          <div style="margin-top:0.5rem">Installed as ~/.openclaw/plugins/intentguard-fim-auth.js. Before OpenClaw executes git_push or file_delete, the plugin computes 20-dimensional tensor overlap. If the bot's current Geometric Mass doesn't overlap with the action's coordinates, execution is blocked. P=1 enforcement. Benchmarked at 0.0004ms.</div>
        </div>
      
        <div class="card" style="border-left:3px solid var(--green)">
          <div class="card-header">
            <span>üì° <strong>The Signal (ThetaSteer)</strong></span>
            <span class="badge badge-complete">live</span>
          </div>
          <div class="detail">Categorization Engine ‚Äî 3-Tier LLM Grounding</div>
          <div style="margin-top:0.5rem">Tier 0: Ollama llama3.2:1b categorizes every message into 20 trust-debt dimensions in ~200ms. Tier 1: Claude Sonnet handles complex reasoning. Tier 2: Human admin blessing via Discord thumbs-up. ThetaSteer routes RED/BLUE/GREEN/PURPLE/CYAN/AMBER/INDIGO/TEAL signals to cognitive rooms.</div>
        </div>
      
        <div class="card" style="border-left:3px solid var(--green)">
          <div class="card-header">
            <span>ü™û <strong>The Transparency Engine</strong></span>
            <span class="badge badge-complete">live</span>
          </div>
          <div class="detail">Public Trust-Debt Reporting ‚Äî #trust-debt-public</div>
          <div style="margin-top:0.5rem">Trust-debt spikes are self-documented in #trust-debt-public Discord channel. The CEO loop posts nightly summaries. Tweet drafts go to #x-posts for admin approval before browser-posting to X. Grid state visible in #ops-board. Open-source trust = the bot proving its own honesty.</div>
        </div>
      
        <div class="card" style="border-left:3px solid var(--green)">
          <div class="card-header">
            <span>üåô <strong>The Ghost User (Night Shift)</strong></span>
            <span class="badge badge-complete">live</span>
          </div>
          <div class="detail">Proactive Scheduler ‚Äî Autonomous Progress While You Sleep</div>
          <div style="margin-top:0.5rem">src/cron/scheduler.ts injects synthetic prompts into SteeringLoop when idle. 10 registered tasks (7 safe, 3 dangerous). Safe tasks auto-execute at sovereignty > 0.6. Dangerous tasks require sovereignty > 0.9 or admin blessing. Rate limited to 4 tasks/hour with per-task cooldowns.</div>
        </div>
      
      <h3>Open-Source Case</h3>
      <div class="card">
        <div style="margin:0.3rem 0">&bull; Push IntentGuard as the reference implementation of an always-on AI operator</div><div style="margin:0.3rem 0">&bull; IAMFIM hooks into every action ‚Äî the patent proves trust is measurable and enforceable</div><div style="margin:0.3rem 0">&bull; Any company can fork IntentGuard and run their own Sovereign Engine</div><div style="margin:0.3rem 0">&bull; The trust-debt pipeline becomes the industry standard for AI compliance (EU AI Act Article 6)</div><div style="margin:0.3rem 0">&bull; Open-source trust: the bot self-reports its own drift, proving the Guard works</div>
      </div>
    </section>
  
    <section>
      <h2>Drift vs Self-Driving</h2>
      <div class="equation">k_E = 0.003 | Drift threshold = 0.003 | ShortRank multiplier = 361x</div>
      <div class="tile-grid">
        
          <div class="card">
            <div class="card-header">
              <span>üåä <strong>Traditional Bot (Drift)</strong></span>
            </div>
            <div style="margin:0.3rem 0"><strong>Approach:</strong> <span class="detail">Probability-based (P < 1). No geometric guard. Trust the LLM output.</span></div>
            <div style="margin:0.3rem 0"><strong>Per-op:</strong> <span class="mono">P = 0.997 per operation (99.7% correct)</span></div>
            <div style="margin:0.3rem 0"><strong>At scale:</strong> After 1000 operations: (0.997)^1000 = 4.9% chance still aligned</div>
            <div style="margin:0.3rem 0"><strong>Catastrophic at:</strong> <span style="color:var(--red)">~230 operations (50% drift probability)</span></div>
          </div>
        
          <div class="card">
            <div class="card-header">
              <span>üõ°Ô∏è <strong>IntentGuard (Self-Driving)</strong></span>
            </div>
            <div style="margin:0.3rem 0"><strong>Approach:</strong> <span class="detail">Certainty-based (P = 1). IAMFIM geometric permission. Trust-debt throttling.</span></div>
            <div style="margin:0.3rem 0"><strong>Per-op:</strong> <span class="mono">P = 1.0 per authorized operation (tensor overlap verified)</span></div>
            <div style="margin:0.3rem 0"><strong>At scale:</strong> Drift detected at 0.003 divergence. Auto-throttle. Self-correct.</div>
            <div style="margin:0.3rem 0"><strong>Catastrophic at:</strong> <span style="color:var(--red)">Never ‚Äî drift triggers permission reduction before damage</span></div>
          </div>
        
      </div>
      <h3>The Steering Loop</h3>
      
        <div class="card" style="padding:0.5rem 1rem">
          <span class="badge badge-done">Step 1</span>
          <strong style="margin-left:0.5rem">Tool call arrives at MCP Proxy</strong>
          <span class="mono" style="margin-left:0.5rem">OpenClaw ‚Üí IntentGuard</span>
        </div>
      
        <div class="card" style="padding:0.5rem 1rem">
          <span class="badge badge-done">Step 2</span>
          <strong style="margin-left:0.5rem">Load identity vector from trust-debt pipeline</strong>
          <span class="mono" style="margin-left:0.5rem">Pipeline Step 4</span>
        </div>
      
        <div class="card" style="padding:0.5rem 1rem">
          <span class="badge badge-done">Step 3</span>
          <strong style="margin-left:0.5rem">Compute tensor overlap with action requirement</strong>
          <span class="mono" style="margin-left:0.5rem">geometric.ts</span>
        </div>
      
        <div class="card" style="padding:0.5rem 1rem">
          <span class="badge badge-done">Step 4</span>
          <strong style="margin-left:0.5rem">If overlap < 0.8 OR sovereignty < minimum: DENY</strong>
          <span class="mono" style="margin-left:0.5rem">FIM Guard</span>
        </div>
      
        <div class="card" style="padding:0.5rem 1rem">
          <span class="badge badge-done">Step 5</span>
          <strong style="margin-left:0.5rem">If denied, record to trust-debt pipeline as drift event</strong>
          <span class="mono" style="margin-left:0.5rem">Pipeline Step 7</span>
        </div>
      
        <div class="card" style="padding:0.5rem 1rem">
          <span class="badge badge-done">Step 6</span>
          <strong style="margin-left:0.5rem">Drift events reduce sovereignty score for future operations</strong>
          <span class="mono" style="margin-left:0.5rem">Pipeline Step 4 recalc</span>
        </div>
      
        <div class="card" style="padding:0.5rem 1rem">
          <span class="badge badge-done">Step 7</span>
          <strong style="margin-left:0.5rem">Bot auto-throttles: fewer permissions until trust rebuilds</strong>
          <span class="mono" style="margin-left:0.5rem">Self-correction</span>
        </div>
      
        <div class="card" style="padding:0.5rem 1rem">
          <span class="badge badge-done">Step 8</span>
          <strong style="margin-left:0.5rem">Transparency Engine reports drift catch to public Discord</strong>
          <span class="mono" style="margin-left:0.5rem">Open trust</span>
        </div>
      
      <h3>ThetaSteer &rarr; IAMFIM Tier Mapping</h3>
      <div class="tile-grid">
        
          <div class="card" style="border-left:3px solid #dc2626">
            <div class="card-header">
              <span style="color:#dc2626"><strong>RED</strong></span>
              <span class="mono">vault</span>
            </div>
            <div class="detail">security &rarr; Legal, compliance, patent, security audit</div>
          </div>
        
          <div class="card" style="border-left:3px solid #3b82f6">
            <div class="card-header">
              <span style="color:#3b82f6"><strong>BLUE</strong></span>
              <span class="mono">builder</span>
            </div>
            <div class="detail">code_quality &rarr; Implementation, bug fixes, build systems</div>
          </div>
        
          <div class="card" style="border-left:3px solid #22c55e">
            <div class="card-header">
              <span style="color:#22c55e"><strong>GREEN</strong></span>
              <span class="mono">operator</span>
            </div>
            <div class="detail">process_adherence &rarr; CRM, pipeline, deals, operations</div>
          </div>
        
          <div class="card" style="border-left:3px solid #a855f7">
            <div class="card-header">
              <span style="color:#a855f7"><strong>PURPLE</strong></span>
              <span class="mono">voice</span>
            </div>
            <div class="detail">communication &rarr; Content, blog, book, thought leadership</div>
          </div>
        
          <div class="card" style="border-left:3px solid #06b6d4">
            <div class="card-header">
              <span style="color:#06b6d4"><strong>CYAN</strong></span>
              <span class="mono">laboratory</span>
            </div>
            <div class="detail">innovation &rarr; Experiments, prototypes, research</div>
          </div>
        
          <div class="card" style="border-left:3px solid #f59e0b">
            <div class="card-header">
              <span style="color:#f59e0b"><strong>AMBER</strong></span>
              <span class="mono">performer</span>
            </div>
            <div class="detail">domain_expertise &rarr; Demos, pitches, performances, revenue conversion</div>
          </div>
        
          <div class="card" style="border-left:3px solid #6366f1">
            <div class="card-header">
              <span style="color:#6366f1"><strong>INDIGO</strong></span>
              <span class="mono">architect</span>
            </div>
            <div class="detail">risk_assessment &rarr; Strategy, roadmap, sequencing, design</div>
          </div>
        
          <div class="card" style="border-left:3px solid #0d9488">
            <div class="card-header">
              <span style="color:#0d9488"><strong>TEAL</strong></span>
              <span class="mono">navigator</span>
            </div>
            <div class="detail">adaptability &rarr; Fast scouting, unblocking, cache hits</div>
          </div>
        
      </div>
    </section>
  
    <section>
      <h2>Bootstrap Protocol ‚Äî Mac Mini 96GB</h2>
      <div class="stats-bar" style="margin:1rem 0">
        <span><strong>50</strong> agents</span>
        <span>Topology: <strong>hierarchical</strong></span>
        <span>Queen: <span class="mono">intentguard-queen</span></span>
        <span>Render: <strong>10 minutes</strong></span>
      </div>
      
        <div class="card ">
          <div class="card-header">
            <span><strong>Phase 0 ‚Äî Foundation</strong> (5 agents &rarr; #operator)</span>
            <span class="badge badge-building">active</span>
          </div>
          <div class="detail">Mac Mini initializes daemon. OpenClaw starts headlessly. Claude Flow swarm initializes.</div>
          <ul class="checklist" style="margin-top:0.5rem">
            <li class="check-todo">openclaw onboard --install-daemon</li><li class="check-todo">Start IntentGuard wrapper (npx tsx src/wrapper.ts)</li><li class="check-todo">Verify OpenClaw gateway at ws://127.0.0.1:18789</li><li class="check-todo">Initialize Claude Flow hive-mind with 50 workers</li><li class="check-todo">Map 9 cognitive rooms to Discord channels</li>
          </ul>
        </div>
      
        <div class="card future-phase">
          <div class="card-header">
            <span><strong>Phase 1 ‚Äî The Swarm</strong> (50 agents &rarr; #architect)</span>
            <span class="badge badge-planned">queued</span>
          </div>
          <div class="detail">50 Claude Flows cross-reference and implement. Each agent pulls a TSX tile, works autonomously, reports to Discord.</div>
          <ul class="checklist" style="margin-top:0.5rem">
            <li class="check-todo">Spawn spec-writer agents (11-15 TSX sections)</li><li class="check-todo">Spawn cross-reference agents (267 blog posts ‚Üí trust-debt categories)</li><li class="check-todo">Spawn implementation agents (skills, wrapper, auth)</li><li class="check-todo">Spawn documentation agents (render spec, update checklists)</li><li class="check-todo">Output all progress to cognitive room Discord channels</li><li class="check-todo">Re-render spec every 10 minutes: npx tsx spec/render.tsx</li>
          </ul>
        </div>
      
        <div class="card future-phase">
          <div class="card-header">
            <span><strong>Phase 2 ‚Äî The Clean-Up</strong> (20 agents &rarr; #builder)</span>
            <span class="badge badge-planned">queued</span>
          </div>
          <div class="detail">Bot reaches back into thetadrivencoach, extracts working trust-debt agents, refines them into intentguard/src/pipeline/.</div>
          <ul class="checklist" style="margin-top:0.5rem">
            <li class="check-todo">Extract trust-debt agents (0-7) from thetadrivencoach</li><li class="check-todo">Refactor into intentguard/src/pipeline/ with TypeScript</li><li class="check-todo">Port voice-memo-reactor skill to OpenClaw format</li><li class="check-todo">Port claude-flow-bridge skill to OpenClaw format</li><li class="check-todo">Port system-control skill to OpenClaw format</li><li class="check-todo">Clean up thetadrivencoach/openclaw/ (remove migrated code)</li><li class="check-todo">Update all import paths and type definitions</li>
          </ul>
        </div>
      
        <div class="card future-phase">
          <div class="card-header">
            <span><strong>Phase 3 ‚Äî The Transparency Engine</strong> (10 agents &rarr; #vault)</span>
            <span class="badge badge-planned">queued</span>
          </div>
          <div class="detail">Public trust-debt reporting to Discord. Bot self-documents drift catches. IAMFIM proof-of-concept.</div>
          <ul class="checklist" style="margin-top:0.5rem">
            <li class="check-done">Create #trust-debt-public Discord channel</li><li class="check-done">Wire FIM deny events to public channel</li><li class="check-done">Format drift catches as embeds: tool, overlap, sovereignty, resolution</li><li class="check-todo">Add ThetaSteer categorization to every tool call</li><li class="check-todo">Build real-time sovereignty score dashboard</li><li class="check-todo">Enable thetaking and mortarcombat handles (remove filters)</li>
          </ul>
        </div>
      
      <h3>Discord War Room</h3>
      <div class="tile-grid">
        
          <div class="card" style="padding:0.6rem">
            <span>üî® <strong>#builder</strong></span>
            <span class="detail" style="margin-left:0.5rem">Implementation progress, build outputs</span>
          </div>
        
          <div class="card" style="padding:0.6rem">
            <span>üìê <strong>#architect</strong></span>
            <span class="detail" style="margin-left:0.5rem">Strategic decisions, spec updates</span>
          </div>
        
          <div class="card" style="padding:0.6rem">
            <span>üé© <strong>#operator</strong></span>
            <span class="detail" style="margin-left:0.5rem">CRM, pipeline, deal updates</span>
          </div>
        
          <div class="card" style="padding:0.6rem">
            <span>üîí <strong>#vault</strong></span>
            <span class="detail" style="margin-left:0.5rem">Security audits, FIM denials, trust-debt</span>
          </div>
        
          <div class="card" style="padding:0.6rem">
            <span>üé§ <strong>#voice</strong></span>
            <span class="detail" style="margin-left:0.5rem">Content, transcriptions, blog refs</span>
          </div>
        
          <div class="card" style="padding:0.6rem">
            <span>üß™ <strong>#laboratory</strong></span>
            <span class="detail" style="margin-left:0.5rem">Experiments, A/B results</span>
          </div>
        
          <div class="card" style="padding:0.6rem">
            <span>üé≠ <strong>#performer</strong></span>
            <span class="detail" style="margin-left:0.5rem">Demo outputs, pitch prep</span>
          </div>
        
          <div class="card" style="padding:0.6rem">
            <span>‚òï <strong>#network</strong></span>
            <span class="detail" style="margin-left:0.5rem">Relationship signals, intros</span>
          </div>
        
          <div class="card" style="padding:0.6rem">
            <span>üß≠ <strong>#navigator</strong></span>
            <span class="detail" style="margin-left:0.5rem">Fast answers, unblocking</span>
          </div>
        
          <div class="card" style="padding:0.6rem">
            <span>ü™û <strong>#trust-debt-public</strong></span>
            <span class="detail" style="margin-left:0.5rem">PUBLIC: Bot drift catches, sovereignty scores</span>
          </div>
        
      </div>
      <div class="card" style="margin-top:1rem;border-left:3px solid var(--green)">
        <strong>Authorized Discord Handles</strong>
        <div style="margin:0.3rem 0"><span class="mono">thetaking, mortarcombat</span></div>
        <div class="detail">instant-execute ‚Äî messages from authorized handles are implemented immediately</div>
      </div>
    </section>
  
    <section>
      <h2>ThetaSteer ‚Üí IAMFIM Pipeline</h2>
      <h3>Mailbox Pattern ‚Äî Every Action is Categorized</h3>
      
        <div class="card">
          <div class="card-header"><strong>Discord message</strong></div>
          <div class="detail">Examples: User asks to deploy | User requests CRM update | Voice memo about strategy</div>
          <div style="margin-top:0.3rem;font-size:0.85rem">
            <span class="mono">ThetaSteer tier (RED/BLUE/GREEN/...)</span> &rarr; Maps to 1-3 of 20 trust-debt categories
          </div>
          <div style="margin-top:0.3rem;font-size:0.85rem;color:var(--accent)">Cognitive room ‚Üí Terminal ‚Üí Claude Flow agent</div>
        </div>
      
        <div class="card">
          <div class="card-header"><strong>Tool call (MCP)</strong></div>
          <div class="detail">Examples: shell_execute | git_push | crm_update_lead | file_write</div>
          <div style="margin-top:0.3rem;font-size:0.85rem">
            <span class="mono">Action requirement vector</span> &rarr; Required scores per category (e.g., security >= 0.7)
          </div>
          <div style="margin-top:0.3rem;font-size:0.85rem;color:var(--accent)">FIM proxy ‚Üí overlap check ‚Üí allow/deny</div>
        </div>
      
        <div class="card">
          <div class="card-header"><strong>Voice memo</strong></div>
          <div class="detail">Examples: Sales call debrief | Architecture decision | Bug report</div>
          <div style="margin-top:0.3rem;font-size:0.85rem">
            <span class="mono">Whisper ‚Üí ThetaSteer ‚Üí tier assignment</span> &rarr; Content maps to domain expertise + category scores
          </div>
          <div style="margin-top:0.3rem;font-size:0.85rem;color:var(--accent)">Attention corpus ‚Üí tesseract training ‚Üí identity fractal update</div>
        </div>
      
        <div class="card">
          <div class="card-header"><strong>Git commit</strong></div>
          <div class="detail">Examples: Feature commit | Bug fix | Documentation update</div>
          <div style="margin-top:0.3rem;font-size:0.85rem">
            <span class="mono">Pipeline Agent 1 (keyword extraction)</span> &rarr; Builds presence matrix (step 3) ‚Üí grades (step 4)
          </div>
          <div style="margin-top:0.3rem;font-size:0.85rem;color:var(--accent)">Sovereignty score update ‚Üí FIM recalibration</div>
        </div>
      
        <div class="card">
          <div class="card-header"><strong>Trust-debt spike</strong></div>
          <div class="detail">Examples: Security category drops below 0.5 | 3 consecutive FIM denials</div>
          <div style="margin-top:0.3rem;font-size:0.85rem">
            <span class="mono">CRITICAL drift event</span> &rarr; Triggers sovereignty recalculation
          </div>
          <div style="margin-top:0.3rem;font-size:0.85rem;color:var(--accent)">Auto-throttle permissions + public Discord transparency report</div>
        </div>
      
      <h3>Building the Identity Fractal in Real-Time</h3>
      <div class="detail" style="margin-bottom:1rem">The identity fractal is NOT a static configuration. It is a living 20-dimensional vector that updates with every categorized action.</div>
      
        <div class="card" style="padding:0.5rem 1rem">
          <span class="badge badge-done">Phase 1</span>
          <strong style="margin-left:0.5rem">Intake</strong>
          <span class="detail" style="margin-left:0.5rem">Every signal (message, tool call, voice memo, commit) enters the mailbox</span>
        </div>
      
        <div class="card" style="padding:0.5rem 1rem">
          <span class="badge badge-done">Phase 2</span>
          <strong style="margin-left:0.5rem">Categorize</strong>
          <span class="detail" style="margin-left:0.5rem">ThetaSteer assigns 1-3 trust-debt categories with confidence scores</span>
        </div>
      
        <div class="card" style="padding:0.5rem 1rem">
          <span class="badge badge-done">Phase 3</span>
          <strong style="margin-left:0.5rem">Accumulate</strong>
          <span class="detail" style="margin-left:0.5rem">Category scores update in the identity vector (exponential moving average)</span>
        </div>
      
        <div class="card" style="padding:0.5rem 1rem">
          <span class="badge badge-done">Phase 4</span>
          <strong style="margin-left:0.5rem">Gate</strong>
          <span class="detail" style="margin-left:0.5rem">FIM proxy checks overlap before every tool execution</span>
        </div>
      
        <div class="card" style="padding:0.5rem 1rem">
          <span class="badge badge-done">Phase 5</span>
          <strong style="margin-left:0.5rem">Feedback</strong>
          <span class="detail" style="margin-left:0.5rem">Denials reduce trust; successful operations build trust. The fractal sharpens.</span>
        </div>
      
      <h3>ThetaSteer Backends</h3>
      <div class="tile-grid">
        
          <div class="card">
            <strong>ThetaSteer daemon</strong>
            <div style="margin-top:0.3rem;font-size:0.85rem">Latency: <span class="mono">< 50ms</span> | Accuracy: HIGH | Cost: FREE (local)</div>
          </div>
        
          <div class="card">
            <strong>Ollama llama3.2:1b</strong>
            <div style="margin-top:0.3rem;font-size:0.85rem">Latency: <span class="mono">< 200ms</span> | Accuracy: MEDIUM | Cost: FREE (local)</div>
          </div>
        
          <div class="card">
            <strong>Claude Sonnet API</strong>
            <div style="margin-top:0.3rem;font-size:0.85rem">Latency: <span class="mono">< 2s</span> | Accuracy: HIGHEST | Cost: $0.003/call</div>
          </div>
        
      </div>
    </section>
  
    <div class="section">
      <h2>15. Autonomous Steering Loop ‚Äî Permissionless but Supervised</h2>

      <div class="subsection">
        <h3>Protocol: Ask and Predict</h3>
        <p>
          The Sovereign Engine maintains velocity without manual approval bottlenecks.
          Every action follows the Ask-and-Predict cycle:
        </p>
        <div class="protocol-flow">
          <div class="protocol-step">
            <div class="step-number">1</div>
            <div class="step-content">
              <strong>ASK</strong> ‚Äî Bot posts intent to the relevant Discord room
              <br><code>#builder: "I will refactor the auth module to support JWT rotation"</code>
            </div>
          </div>
          <div class="protocol-step">
            <div class="step-number">2</div>
            <div class="step-content">
              <strong>PREDICT</strong> ‚Äî Bot posts confidence and countdown
              <br><code>PREDICTION: Proceeding in 30s. Aligns with [security, code_quality] goals.</code>
            </div>
          </div>
          <div class="protocol-step">
            <div class="step-number">3</div>
            <div class="step-content">
              <strong>EXECUTE or REDIRECT</strong>
              <br>If no intervention ‚Üí execute autonomously
              <br>If voice memo or text arrives ‚Üí abort, re-plan with new signal
            </div>
          </div>
        </div>
        <div class="config-block">
          <strong>Timeout:</strong> 30000ms |
          <strong>Redirect Grace:</strong> 5000ms |
          <strong>Max Concurrent:</strong> 3
        </div>
      </div>

      <div class="subsection">
        <h3>Execution Tiers</h3>
        <table>
          <thead>
            <tr><th>Tier</th><th>Actors</th><th>Pattern</th><th>Countdown</th><th>FIM Impact</th></tr>
          </thead>
          <tbody>
            
              <tr>
                <td><strong>Admin</strong></td>
                <td><code>thetaking, mortarcombat</code></td>
                <td>Instant Execute</td>
                <td>None (0s)</td>
                <td>High Sovereignty Weight</td>
              </tr>
            
              <tr>
                <td><strong>Trusted</strong></td>
                <td><code>(configured members)</code></td>
                <td>Ask and Predict</td>
                <td>30s (configurable)</td>
                <td>Neutral ‚Äî Alignment Check</td>
              </tr>
            
              <tr>
                <td><strong>General</strong></td>
                <td><code>(all server members)</code></td>
                <td>Suggestion Only</td>
                <td>Never (requires Admin thumbs-up)</td>
                <td>None unless Admin-blessed</td>
              </tr>
            
              <tr>
                <td><strong>Admin Thumbs-Up</strong></td>
                <td><code>Admin reacts to non-admin message</code></td>
                <td>Validation Hook</td>
                <td>Immediate on reaction</td>
                <td>Identity Fractal Sharpening</td>
              </tr>
            
          </tbody>
        </table>
      </div>

      <div class="subsection">
        <h3>Signal Priority Matrix</h3>
        <table>
          <thead>
            <tr><th>Signal Source</th><th>Pattern</th><th>Priority</th><th>FIM Impact</th></tr>
          </thead>
          <tbody>
            
              <tr>
                <td><strong>Admin Message</strong></td>
                <td>Instant Execute</td>
                <td>1</td>
                <td>High Sovereignty Weight</td>
              </tr>
            
              <tr>
                <td><strong>Voice Memo Redirect</strong></td>
                <td>Abort + Replan</td>
                <td>2</td>
                <td>Corrective Steering Signal</td>
              </tr>
            
              <tr>
                <td><strong>Admin Thumbs-Up</strong></td>
                <td>Validation Hook</td>
                <td>3</td>
                <td>Identity Fractal Sharpening</td>
              </tr>
            
              <tr>
                <td><strong>Bot Prediction</strong></td>
                <td>Timeout (30s)</td>
                <td>4</td>
                <td>Neutral (Alignment Check)</td>
              </tr>
            
              <tr>
                <td><strong>Non-Admin Suggestion</strong></td>
                <td>Queue Only</td>
                <td>5</td>
                <td>None without Admin blessing</td>
              </tr>
            
          </tbody>
        </table>
      </div>

      <div class="subsection">
        <h3>Conflict Resolution</h3>
        <div class="callout">
    When a Voice Memo redirect arrives that contradicts a previous Admin Command,
    the bot prioritizes the <strong>Latest Signal</strong> but flags it in <code>#vault</code>
    as a "Strategic Pivot." In a headless environment, the most recent context is usually
    the most relevant to preventing drift. The pivot is logged to the transparency engine
    with both the original command and the redirect for audit trail.
  </div>
      </div>

      <div class="subsection">
        <h3>Geometric Surface Attack Prevention</h3>
        <p>
          If any thumbs-up from any user could trigger execution, non-authorized users
          could move the bot's "Mass" into restricted FIM coordinates. The Admin Thumbs-Up
          protocol prevents this:
        </p>
        <ul>
          <li>Only Admin reactions (thetaking, mortarcombat) can "bless" non-admin suggestions</li>
          <li>Non-admin suggestions enter the Ask-and-Predict queue but cannot force execution</li>
          <li>The FIM auth layer validates every action regardless of who triggers it</li>
          <li>All reactions are logged to #trust-debt-public for transparency</li>
        </ul>
      </div>
    </div>
  
  
    <section>
      <h2>OpenClaw Integration ‚Äî Cortex+Body Pattern</h2>
      <h3>Wrapper Pattern (5 Steps)</h3>
      
        <div class="card" style="padding:0.6rem 1rem">
          <span class="badge badge-done">Step 1</span>
          <strong style="margin-left:0.5rem">Install FIM Auth Plugin</strong>
          <div class="detail">Writes ~/.openclaw/plugins/intentguard-fim-auth.js with 20-dim tensor overlap checks. Reads sovereignty from pipeline data. Defines ACTION_REQUIREMENTS map (shell_execute, git_push, file_delete, etc.)</div>
          <div class="mono" style="font-size:0.75rem">src/wrapper.ts ‚Üí installFimPlugin()</div>
        </div>
      
        <div class="card" style="padding:0.6rem 1rem">
          <span class="badge badge-done">Step 2</span>
          <strong style="margin-left:0.5rem">Register Custom Skills</strong>
          <div class="detail">Creates 6 skill directories in ~/.openclaw/workspace/skills/ with manifest.json + index.js. Each index.js delegates to our TypeScript implementations via dynamic import.</div>
          <div class="mono" style="font-size:0.75rem">src/wrapper.ts ‚Üí registerSkills()</div>
        </div>
      
        <div class="card" style="padding:0.6rem 1rem">
          <span class="badge badge-done">Step 3</span>
          <strong style="margin-left:0.5rem">Wire LLM Backends</strong>
          <div class="detail">Updates ~/.openclaw/openclaw.json with Ollama (primary, Tier 0 fast) and Anthropic Claude Sonnet (fallback, Tier 1 deep). Backs up existing config first.</div>
          <div class="mono" style="font-size:0.75rem">src/wrapper.ts ‚Üí wireLlmBackends()</div>
        </div>
      
        <div class="card" style="padding:0.6rem 1rem">
          <span class="badge badge-done">Step 4</span>
          <strong style="margin-left:0.5rem">Spawn or Connect Gateway</strong>
          <div class="detail">Resolves openclaw binary from node_modules, spawns as child process with --port 18789. Or connects to existing gateway with --no-gateway flag. Waits for port ready.</div>
          <div class="mono" style="font-size:0.75rem">src/wrapper.ts ‚Üí spawnGateway()</div>
        </div>
      
        <div class="card" style="padding:0.6rem 1rem">
          <span class="badge badge-done">Step 5</span>
          <strong style="margin-left:0.5rem">WebSocket Parasite Hook</strong>
          <div class="detail">Connects ws://127.0.0.1:18789/ws and subscribes to message_received, tool_call, session_start events. Runs 3-tier grounding on every inbound message.</div>
          <div class="mono" style="font-size:0.75rem">src/wrapper.ts ‚Üí connectWebSocket()</div>
        </div>
      
      <h3>Registered Skills (OpenClaw Workspace)</h3>
      <div class="tile-grid">
        
          <div class="card">
            <div class="card-header">
              <strong>LLM Controller (3-Tier Grounding)</strong>
              <span class="badge badge-done">done</span>
            </div>
            <div class="detail">Tools: llm_categorize, llm_reason, llm_transcribe</div>
            <div class="mono" style="font-size:0.75rem;margin-top:0.3rem">src/skills/llm-controller.ts</div>
          </div>
        
          <div class="card">
            <div class="card-header">
              <strong>ThetaSteer Categorize (IAMFIM)</strong>
              <span class="badge badge-done">done</span>
            </div>
            <div class="detail">Tools: thetasteer_categorize</div>
            <div class="mono" style="font-size:0.75rem;margin-top:0.3rem">src/skills/thetasteer-categorize.ts</div>
          </div>
        
          <div class="card">
            <div class="card-header">
              <strong>Voice Memo Reactor</strong>
              <span class="badge badge-done">done</span>
            </div>
            <div class="detail">Tools: voice_react</div>
            <div class="mono" style="font-size:0.75rem;margin-top:0.3rem">src/skills/voice-memo-reactor.ts</div>
          </div>
        
          <div class="card">
            <div class="card-header">
              <strong>Claude Flow Bridge</strong>
              <span class="badge badge-done">done</span>
            </div>
            <div class="detail">Tools: bridge_dispatch, bridge_stdin</div>
            <div class="mono" style="font-size:0.75rem;margin-top:0.3rem">src/skills/claude-flow-bridge.ts</div>
          </div>
        
          <div class="card">
            <div class="card-header">
              <strong>Email Outbound</strong>
              <span class="badge badge-done">done</span>
            </div>
            <div class="detail">Tools: email_send</div>
            <div class="mono" style="font-size:0.75rem;margin-top:0.3rem">src/skills/email-outbound.ts</div>
          </div>
        
          <div class="card">
            <div class="card-header">
              <strong>Night Shift Scheduler</strong>
              <span class="badge badge-done">done</span>
            </div>
            <div class="detail">Tools: nightshift_status, nightshift_trigger</div>
            <div class="mono" style="font-size:0.75rem;margin-top:0.3rem">src/cron/scheduler.ts</div>
          </div>
        
      </div>
      <h3>LLM Grounding Protocol (3-Tier)</h3>
      <table>
        <thead><tr><th>Tier</th><th>Name</th><th>Model</th><th>Latency</th><th>Role</th></tr></thead>
        <tbody>
          <tr><td>0</td><td>Ollama (Local)</td><td><span class="mono">llama3.2:1b</span></td><td>~200ms</td><td class="detail">Fast categorization into trust-debt dimensions</td></tr><tr><td>1</td><td>Claude Sonnet (API)</td><td><span class="mono">claude-sonnet-4-20250514</span></td><td>~2-5s</td><td class="detail">Complex reasoning, steering decisions, tweet composition</td></tr><tr><td>2</td><td>Human Admin (Discord)</td><td><span class="mono">N/A ‚Äî thumbs-up blessing</span></td><td>Minutes to hours</td><td class="detail">Final authority on dangerous actions</td></tr>
        </tbody>
      </table>
      <h3>Entry Points</h3>
      
        <div class="card" style="padding:0.6rem 1rem">
          <div class="mono">npx tsx src/wrapper.ts</div>
          <div class="detail">Unified Cortex+Body: spawns OpenClaw, installs FIM, registers skills, wires LLM, connects WebSocket</div>
          <div style="margin-top:0.3rem;font-size:0.8rem">Flags: --no-fim --no-gateway --no-skills --no-llm --verbose</div>
        </div>
      
        <div class="card" style="padding:0.6rem 1rem">
          <div class="mono">npx tsx src/runtime.ts</div>
          <div class="detail">Discord-first runtime: bot login, cognitive rooms, steering loop, Night Shift, CEO loop</div>
          
        </div>
      
        <div class="card" style="padding:0.6rem 1rem">
          <div class="mono">npx tsx src/ceo-loop.ts</div>
          <div class="detail">Standalone CEO: reads spec, prioritizes, subdivides, implements, commits</div>
          <div style="margin-top:0.3rem;font-size:0.8rem">Flags: --no-commit --dry-run</div>
        </div>
      
      <h3>Integration Tasks</h3>
      <ul class="checklist">
        <li class="check-done">wrapper.ts spawns OpenClaw as child process <span class="detail">(Phase 0)</span></li><li class="check-done">FIM auth plugin installed via wrapper <span class="detail">(Phase 2)</span></li><li class="check-done">6 skills registered in OpenClaw workspace <span class="detail">(Phase 1)</span></li><li class="check-done">LLM backends wired (Ollama + Sonnet) <span class="detail">(Phase 1)</span></li><li class="check-done">WebSocket parasite hook connected <span class="detail">(Phase 0)</span></li><li class="check-done">runtime.ts wired to Night Shift scheduler <span class="detail">(Phase 9)</span></li><li class="check-todo">Merge wrapper.ts + runtime.ts into single entry point <span class="detail">(Phase 3)</span></li><li class="check-done">WhatsApp adapter wired to channel-manager <span class="detail">(Phase 3)</span></li><li class="check-done">Telegram adapter wired to channel-manager <span class="detail">(Phase 3)</span></li><li class="check-todo">Claude Flow agent pool (50 concurrent) for task subdivision <span class="detail">(Phase 9)</span></li><li class="check-todo">Test cross-channel room routing (Discord ‚Üí WhatsApp ‚Üí Telegram) <span class="detail">(Phase 3)</span></li><li class="check-todo">Build ASCII grid renderer for #ops-board <span class="detail">(Phase 4)</span></li><li class="check-todo">Wire task completions to POINTER_CREATE events on tesseract grid <span class="detail">(Phase 4)</span></li>
      </ul>
    </section>
  
    <section>
      <h2>Night Shift ‚Äî The Ghost User</h2>
      <div class="config-block">
        Heartbeat: 15 minutes | Max tasks/hr: 4 | Idle threshold: 5 minutes since last human message | Default room: #strategy-room
      </div>
      <h3>Proactive Task Registry</h3>
      <div class="tile-grid">
        
          <div class="card" style="border-left:3px solid var(--green)">
            <div class="card-header">
              <strong>Test Coverage Scan</strong>
              <span class="badge badge-complete">safe</span>
            </div>
            <div class="detail">Scan for untested functions and generate test stubs</div>
            <div style="margin-top:0.3rem;font-size:0.8rem">Cooldown: 4h | Categories: testing, code_quality</div>
          </div>
        
          <div class="card" style="border-left:3px solid var(--green)">
            <div class="card-header">
              <strong>Trust-Debt Report</strong>
              <span class="badge badge-complete">safe</span>
            </div>
            <div class="detail">Generate trust-debt summary and post to #trust-debt-public</div>
            <div style="margin-top:0.3rem;font-size:0.8rem">Cooldown: 6h | Categories: transparency, process_adherence</div>
          </div>
        
          <div class="card" style="border-left:3px solid var(--green)">
            <div class="card-header">
              <strong>Spec Progress Check</strong>
              <span class="badge badge-complete">safe</span>
            </div>
            <div class="detail">Count done/wip/todo across all spec phases, post status update</div>
            <div style="margin-top:0.3rem;font-size:0.8rem">Cooldown: 2h | Categories: planning, transparency</div>
          </div>
        
          <div class="card" style="border-left:3px solid var(--green)">
            <div class="card-header">
              <strong>FIM Benchmark</strong>
              <span class="badge badge-complete">safe</span>
            </div>
            <div class="detail">Re-run FIM overlap benchmarks, report if latency drifted</div>
            <div style="margin-top:0.3rem;font-size:0.8rem">Cooldown: 12h | Categories: performance, security</div>
          </div>
        
          <div class="card" style="border-left:3px solid var(--green)">
            <div class="card-header">
              <strong>Room Context Cleanup</strong>
              <span class="badge badge-complete">safe</span>
            </div>
            <div class="detail">Prune stale context from cognitive room state files</div>
            <div style="margin-top:0.3rem;font-size:0.8rem">Cooldown: 8h | Categories: operations, reliability</div>
          </div>
        
          <div class="card" style="border-left:3px solid var(--green)">
            <div class="card-header">
              <strong>Nightly Summary</strong>
              <span class="badge badge-complete">safe</span>
            </div>
            <div class="detail">Compile what was accomplished today, tweet + Discord post</div>
            <div style="margin-top:0.3rem;font-size:0.8rem">Cooldown: 24h | Categories: communication, transparency</div>
          </div>
        
          <div class="card" style="border-left:3px solid var(--green)">
            <div class="card-header">
              <strong>Grid Heartbeat</strong>
              <span class="badge badge-complete">safe</span>
            </div>
            <div class="detail">Read current tesseract grid state, post to #ops-board if changed</div>
            <div style="margin-top:0.3rem;font-size:0.8rem">Cooldown: 30m | Categories: operations</div>
          </div>
        
          <div class="card" style="border-left:3px solid var(--red)">
            <div class="card-header">
              <strong>Deep Refactor</strong>
              <span class="badge badge-critical">dangerous</span>
            </div>
            <div class="detail">Identify code smell patterns and propose refactoring plan</div>
            <div style="margin-top:0.3rem;font-size:0.8rem">Cooldown: 24h | Categories: architecture, code_quality</div>
          </div>
        
          <div class="card" style="border-left:3px solid var(--red)">
            <div class="card-header">
              <strong>Spec Implementation</strong>
              <span class="badge badge-critical">dangerous</span>
            </div>
            <div class="detail">Pick next todo from spec and implement it (like CEO loop)</div>
            <div style="margin-top:0.3rem;font-size:0.8rem">Cooldown: 2h | Categories: planning, architecture</div>
          </div>
        
          <div class="card" style="border-left:3px solid var(--red)">
            <div class="card-header">
              <strong>Config Optimization</strong>
              <span class="badge badge-critical">dangerous</span>
            </div>
            <div class="detail">Analyze runtime performance and suggest config changes</div>
            <div style="margin-top:0.3rem;font-size:0.8rem">Cooldown: 12h | Categories: performance, operations</div>
          </div>
        
      </div>
      <h3>Risk Gating Rules</h3>
      
        <div class="card" style="padding:0.6rem 1rem">
          <span class="badge badge-complete">safe</span>
          <span class="badge badge-done" style="margin-left:0.5rem">trusted</span>
          <span class="detail" style="margin-left:0.5rem">Safe task + sovereignty > 0.6 = auto-execute via trusted tier (5s countdown)</span>
        </div>
      
        <div class="card" style="padding:0.6rem 1rem">
          <span class="badge badge-complete">safe</span>
          <span class="badge badge-pending" style="margin-left:0.5rem">general</span>
          <span class="detail" style="margin-left:0.5rem">Safe task + sovereignty < 0.6 = needs admin thumbs-up (60s countdown)</span>
        </div>
      
        <div class="card" style="padding:0.6rem 1rem">
          <span class="badge badge-critical">dangerous</span>
          <span class="badge badge-done" style="margin-left:0.5rem">trusted</span>
          <span class="detail" style="margin-left:0.5rem">Dangerous task + sovereignty > 0.9 = auto-execute (rare ‚Äî requires very high trust)</span>
        </div>
      
        <div class="card" style="padding:0.6rem 1rem">
          <span class="badge badge-critical">dangerous</span>
          <span class="badge badge-pending" style="margin-left:0.5rem">general</span>
          <span class="detail" style="margin-left:0.5rem">Dangerous task + sovereignty < 0.9 = needs admin thumbs-up (30s+ countdown)</span>
        </div>
      
      <h3>CEO Loop v2 Features</h3>
      <ul class="checklist">
        <li class="check-done"><strong>Infinite operation</strong> ‚Äî Never stops ‚Äî watches for new todos after completing all</li><li class="check-done"><strong>Priority scoring</strong> ‚Äî urgency x impact x dependency-free ranking</li><li class="check-done"><strong>Auto-subdivide</strong> ‚Äî Breaks vague todos into 3-5 concrete subtasks</li><li class="check-done"><strong>Circuit breaker</strong> ‚Äî 3 consecutive failures ‚Üí 5min cooldown ‚Üí reset</li><li class="check-done"><strong>Auto-commit</strong> ‚Äî git add + commit every 3 completed tasks</li><li class="check-done"><strong>Nightly summary tweet</strong> ‚Äî Compiles completed work at midnight, posts to #x-posts</li><li class="check-done"><strong>Heartbeat</strong> ‚Äî Status message to Discord every 5 minutes when idle</li><li class="check-done"><strong>Spec watcher</strong> ‚Äî Scans spec TSX files for new todo items on each cycle</li><li class="check-todo"><strong>Claude Flow agent pool</strong> ‚Äî 50 concurrent agents for parallel task execution</li><li class="check-todo"><strong>Progress tracker</strong> ‚Äî completed/total/blocked counts per phase</li>
      </ul>
    </section>
  
    <section>
      <h2>Business Objectives (Inferred from Codebase)</h2>
      <div class="callout">
        <strong>Core Thesis:</strong> IntentGuard quantifies "Trust Debt" ‚Äî the measurable gap between what you intended to build and what you actually built. This becomes infrastructure for AI safety compliance (EU AI Act Article 6, August 2025 enforcement).
      </div>
      <h3>Patent Portfolio (4 Provisionals Filed)</h3>
      <table>
        <thead><tr><th>Filing</th><th>Title</th><th>Strategic Value</th></tr></thead>
        <tbody>
          <tr><td><span class="mono">63/782,569</span> (Dec 2023)</td><td>Unity Architecture: Position-Meaning Correspondence</td><td>The math foundation ‚Äî S=P=H</td></tr><tr><td><span class="mono">63/854,530</span> (Apr 2024)</td><td>Cognitive Prosthetic Amplification via Unity Architecture</td><td>The application layer ‚Äî AI augmenting human decision-making</td></tr><tr><td><span class="mono">63/XXX,XXX</span> (Jan 2025)</td><td>Asymmetric Matrix Trust Debt Calculation System</td><td>The measurement engine ‚Äî 20-category trust scoring</td></tr><tr><td><span class="mono">63/XXX,XXX</span> (Feb 2025)</td><td>Real-Time AI Behavior Drift Detection System</td><td>The guard ‚Äî FIM permission gating on every tool call</td></tr>
        </tbody>
      </table>
      <div class="detail" style="margin-top:0.5rem">Source: <span class="mono">../intentguard/docs/patents/PATENTS.md</span></div>
      <h3>Revenue Strategy (3 Phases)</h3>
      <div class="tile-grid">
        
          <div class="card" style="border-left:3px solid var(--green)">
            <div class="card-header">
              <span><strong>Phase 1: Open-Source Proof</strong></span>
              <span class="badge badge-complete">current</span>
            </div>
            <div class="detail">Free git-based Trust Debt analysis. MIT License. Proves the math works on real repositories. Nature/Science paper submission for scientific credibility.</div>
            <div style="margin-top:0.3rem;font-size:0.8rem"><strong>Revenue:</strong> $0 (credibility building) | <strong>Metric:</strong> 10,000+ repos analyzed</div>
            <div class="detail" style="margin-top:0.3rem">Source: <span class="mono">../intentguard/docs/patents/NATURE_PAPER_STRATEGY.md</span></div>
          </div>
        
          <div class="card" style="border-left:3px solid var(--yellow)">
            <div class="card-header">
              <span><strong>Phase 2: SaaS Platform</strong></span>
              <span class="badge badge-planned">planned</span>
            </div>
            <div class="detail">AI output trust measurement platform. Patent-protected. Every AI system needs Trust Debt scoring for EU AI Act compliance. $420B+ addressable market.</div>
            <div style="margin-top:0.3rem;font-size:0.8rem"><strong>Revenue:</strong> SaaS subscription | <strong>Metric:</strong> Patent portfolio + scientific publication</div>
            
          </div>
        
          <div class="card" style="border-left:3px solid var(--purple)">
            <div class="card-header">
              <span><strong>Phase 3: Regulatory Authority</strong></span>
              <span class="badge badge-planned">planned</span>
            </div>
            <div class="detail">Nature/Science paper establishes IntentGuard as the reference standard for AI compliance measurement. Regulatory bodies adopt Trust Debt terminology.</div>
            <div style="margin-top:0.3rem;font-size:0.8rem"><strong>Revenue:</strong> Enterprise licensing + consulting | <strong>Metric:</strong> Scientific authority + patent lock</div>
            <div class="detail" style="margin-top:0.3rem">Source: <span class="mono">../intentguard/docs/01-business/INTENTGUARD_BUSINESS_PLAN.md</span></div>
          </div>
        
      </div>
      <h3>Competitive Advantage: The Bot IS the Proof</h3>
      <div class="card">
        <div style="margin:0.3rem 0"><strong>Self-referential:</strong> <span class="detail">IntentGuard runs on itself. The Sovereign Engine measures its own trust debt while operating. The product is its own proof-of-concept.</span></div><div style="margin:0.3rem 0"><strong>Public audit trail:</strong> <span class="detail">#trust-debt-public Discord channel shows real-time drift catches. Anyone can verify the Guard works.</span></div><div style="margin:0.3rem 0"><strong>Voice memo training signal:</strong> <span class="detail">Every human reaction (fire/zap/thumbsup/ice) on voice memos trains the geometric identity. The training data is the actual business operation ‚Äî not synthetic benchmarks.</span></div><div style="margin:0.3rem 0"><strong>Open-source trust:</strong> <span class="detail">Fork IntentGuard, run your own Sovereign Engine. The patent protects the SaaS measurement service, not the self-driving bot.</span></div>
      </div>
    </section>
  
    <section>
      <h2>Discord Message Quality Playbook</h2>
      <div class="callout">
        <strong>Problem:</strong> Current Discord messages are functional but lack personality, context density, and actionability. A headless CEO should communicate like a concise executive ‚Äî not a log file.
      </div>
      <h3>Current Message Patterns (What Exists)</h3>
      <table>
        <thead><tr><th>Event</th><th>Current Format</th><th>Source</th></tr></thead>
        <tbody>
          <tr><td>Voice memo processed</td><td><code>**Voice memo processed** (12s) from @elias > transcription... notation *question* **Priority:** P1 | **Hardness:** 4/5 ‚Üí sonnet</code></td><td><span class="mono">../intentguard/src/skills/voice-memo-reactor.ts:185</span></td></tr><tr><td>Task dispatched</td><td><code>üöÄ **Task a1b2** dispatched to **#builder** > preview Type in this channel to send STDIN...</code></td><td><span class="mono">../thetadrivencoach/openclaw/src/runtime.ts:437</span></td></tr><tr><td>Categorization reply</td><td><code>‚ö° Dispatching to **#operator** üì° B3:C1 *What does Signal mean in Grid?* H3/5 ‚Üí sonnet</code></td><td><span class="mono">../thetadrivencoach/openclaw/src/runtime.ts:634</span></td></tr><tr><td>Task complete</td><td><code>‚úÖ Task a1b2 complete ```output here```</code></td><td><span class="mono">../thetadrivencoach/openclaw/src/output-poller.ts:152</span></td></tr><tr><td>Status command</td><td><code>üõ°Ô∏è IntentGuard alive. Skills: 9 loaded</code></td><td><span class="mono">../intentguard/src/runtime.ts:720</span></td></tr><tr><td>CEO loop tweet</td><td><code>üìù **Draft Tweet** ‚Äî React üëç to publish to X [text]</code></td><td><span class="mono">../intentguard/src/ceo-loop.ts:573</span></td></tr><tr><td>Ask-and-predict</td><td><code>PREDICTION: Proceeding in 30s. Aligns with [security, code_quality]</code></td><td><span class="mono">../intentguard/src/discord/steering-loop.ts</span></td></tr>
        </tbody>
      </table>
      <h3>Improved Message Templates</h3>
      <div class="warn-box" style="border-color:var(--accent);background:rgba(56,189,248,0.1)">
        <h3 style="color:var(--accent)">Design Principles</h3>
        <div style="margin:0.3rem 0"><strong>1. Lead with action, not metadata.</strong> "Building auth module" not "Task a1b2 dispatched to #builder"</div><div style="margin:0.3rem 0"><strong>2. Show trust context.</strong> Every message should reveal what ThetaSteer thought and why FIM allowed it.</div><div style="margin:0.3rem 0"><strong>3. Emoji as data, not decoration.</strong> üî•=urgent, üü¢=FIM-passed, üî¥=FIM-blocked, ‚è≥=countdown, ‚úÖ=done.</div><div style="margin:0.3rem 0"><strong>4. Handoff always visible.</strong> If another room should see this, say so explicitly.</div><div style="margin:0.3rem 0"><strong>5. Keep under 280 chars when possible.</strong> Tweetable = readable.</div>
      </div>
      <div class="tile-grid">
        
          <div class="card">
            <div class="card-header">
              <strong>Voice Memo ‚Üí Action</strong>
              <span class="badge badge-building">improved</span>
            </div>
            <pre style="font-size:0.75rem;color:var(--text)">üé§ Voice memo from @elias (42s)
> "We need to add JWT rotation to the auth module..."

üì° B3:C1 Tactics.Signal √ó Operations.Grid
üéØ H4/5 ‚Üí sonnet | üü¢ FIM overlap 0.91
üî® ‚Üí #builder (auto-dispatch in 5s)

React üßä to backlog | ‚õî to abort</pre>
            <div class="detail" style="margin-top:0.3rem"><strong>Changes:</strong> Added FIM overlap score, sovereignty-aware countdown, explicit abort mechanism, trust context inline.</div>
          </div>
        
          <div class="card">
            <div class="card-header">
              <strong>Task Progress Update</strong>
              <span class="badge badge-building">improved</span>
            </div>
            <pre style="font-size:0.75rem;color:var(--text)">üî® #builder ‚Äî JWT rotation (task f3a8)
‚è≥ Running 45s | üü¢ sovereignty 0.87
```
‚úì Created src/auth/jwt-rotation.ts
‚úì Added RSA-256 key pair generation
‚†ø Writing unit tests...
```
üìê Handoff ‚Üí #architect when done (design review)</pre>
            <div class="detail" style="margin-top:0.3rem"><strong>Changes:</strong> Live progress with checkmarks, sovereignty score visible, handoff planned, room context.</div>
          </div>
        
          <div class="card">
            <div class="card-header">
              <strong>FIM Denial (Transparency)</strong>
              <span class="badge badge-building">new</span>
            </div>
            <pre style="font-size:0.75rem;color:var(--text)">üî¥ FIM DENIED ‚Äî git_push blocked
Overlap: 0.62 (required: 0.80)
Failed: testing=0.4 (need 0.6), security=0.3 (need 0.5)
Sovereignty: 0.71 (threshold: 0.70) ‚ö†Ô∏è barely passing

üìä Trust debt spike logged to #trust-debt-public
üõ†Ô∏è Resolution: Run test suite, then retry push</pre>
            <div class="detail" style="margin-top:0.3rem"><strong>Changes:</strong> Public FIM denial with specific failed categories, resolution guidance, and transparency posting.</div>
          </div>
        
          <div class="card">
            <div class="card-header">
              <strong>CEO Loop Heartbeat</strong>
              <span class="badge badge-building">new</span>
            </div>
            <pre style="font-size:0.75rem;color:var(--text)">ü´Ä CEO Heartbeat ‚Äî 02:30 UTC
Sovereignty: 0.87 üü¢ | Tasks: 3 done, 1 running
üî• Hot: C1 Operations.Grid (4 tasks today)
üßä Cold: A1 Strategy.Law (0 tasks this week)

Next: scanning spec for todos in 60s
Last commit: "feat(auth): JWT rotation" (23m ago)</pre>
            <div class="detail" style="margin-top:0.3rem"><strong>Changes:</strong> Periodic heartbeat showing which tesseract cells are hot/cold, sovereignty trend, recent activity.</div>
          </div>
        
          <div class="card">
            <div class="card-header">
              <strong>Night Shift Summary</strong>
              <span class="badge badge-building">new</span>
            </div>
            <pre style="font-size:0.75rem;color:var(--text)">üåô Night Shift Complete ‚Äî 8h autonomous
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
‚úÖ 12 tasks completed | ‚è∞ 2 timed out | üî¥ 1 FIM denial
üìä Sovereignty: 0.82 ‚Üí 0.87 (+0.05)
üî• Focus: C1 Grid.Law (7 tasks) + B2 Opp.Deal (3 tasks)
üí∞ Cost: $0.42 (38 sonnet calls + 2 opus)

Top commits:
‚Ä¢ feat(auth): JWT rotation
‚Ä¢ fix(pipeline): step-4 grade calculation
‚Ä¢ docs(skills): system-control usage guide

üßä Cold spots (need attention):
‚Ä¢ A3 Strategy.Fund ‚Äî 0 tasks in 72h
‚Ä¢ B1 Tactics.Speed ‚Äî stale todo since Feb 10</pre>
            <div class="detail" style="margin-top:0.3rem"><strong>Changes:</strong> Morning briefing for the human CEO. Shows overnight cost, sovereignty delta, tesseract heat, and cold spots.</div>
          </div>
        
          <div class="card">
            <div class="card-header">
              <strong>Ask-and-Predict (Improved)</strong>
              <span class="badge badge-building">improved</span>
            </div>
            <pre style="font-size:0.75rem;color:var(--text)">ü§ñ INTENT: Refactor output-poller.ts
üì° C2 Operations.Loop | H3/5 ‚Üí sonnet
üü¢ FIM overlap 0.94 | sovereignty 0.87

‚è≥ Executing in 30s unless redirected
React ‚õî to abort | üî• to expedite | üí¨ to discuss

Why: stabilization detection has 3 edge cases
What changes: extract PromptDetector class, add timeout config
Risk: LOW ‚Äî no external side effects</pre>
            <div class="detail" style="margin-top:0.3rem"><strong>Changes:</strong> Shows WHY, WHAT CHANGES, and RISK assessment. Makes informed non-intervention possible.</div>
          </div>
        
      </div>
      <h3>Message Behavior Rules</h3>
      <div class="card">
        <div style="margin:0.3rem 0"><strong>Rule 1 ‚Äî Sovereignty in every message:</strong> <span class="detail">Every outbound message includes the current sovereignty score. Humans should always know the trust level.</span></div><div style="margin:0.3rem 0"><strong>Rule 2 ‚Äî ThetaSteer notation on dispatch:</strong> <span class="detail">Every task dispatch shows the full grid notation (emoji + coordinate + axis names). This trains humans to think in tesseract coordinates.</span></div><div style="margin:0.3rem 0"><strong>Rule 3 ‚Äî FIM denials are public:</strong> <span class="detail">Every denial posts to both the requesting room AND #trust-debt-public. Transparency is non-negotiable.</span></div><div style="margin:0.3rem 0"><strong>Rule 4 ‚Äî Handoffs are explicit:</strong> <span class="detail">"üìê Handoff ‚Üí #architect when done" ‚Äî never silently route between rooms.</span></div><div style="margin:0.3rem 0"><strong>Rule 5 ‚Äî Cost in summaries:</strong> <span class="detail">Every night shift summary and weekly report includes API cost breakdown. The bot accounts for its own spending.</span></div><div style="margin:0.3rem 0"><strong>Rule 6 ‚Äî Cold spots are flagged:</strong> <span class="detail">Tesseract cells with 0 activity for >48h get called out in heartbeats. Neglected areas are strategic risk.</span></div>
      </div>
      <div class="detail" style="margin-top:0.5rem">Implementation files to modify: <span class="mono">../intentguard/src/skills/voice-memo-reactor.ts:176-206</span>, <span class="mono">../intentguard/src/ceo-loop.ts:566-580</span>, <span class="mono">../intentguard/src/discord/steering-loop.ts</span>, <span class="mono">../intentguard/src/discord/transparency-engine.ts</span>, <span class="mono">../thetadrivencoach/openclaw/src/output-poller.ts:152-174</span>, <span class="mono">../thetadrivencoach/openclaw/src/runtime.ts:437-438,634-640</span></div>
    </section>
  
    <section>
      <h2>Road to Full Practical Self-Driving</h2>
      <div class="callout"><strong>Definition:</strong> "Full practical self-driving" means the bot operates 24/7 with zero human intervention for routine tasks, sovereignty-gated autonomy for risky tasks, and voice memo steering for strategic pivots. The human CEO checks Discord once per morning.</div>
      <h3>What's Working Now (Green)</h3>
      <div class="tile-grid">
      <div class="card" style="border-left:3px solid var(--green)">
        <strong>Voice Memo ‚Üí Terminal Dispatch</strong>
        <div class="detail">14-step pipeline: Discord attachment ‚Üí Whisper ‚Üí ThetaSteer ‚Üí model routing ‚Üí background Claude CLI ‚Üí output capture ‚Üí Discord reply. Fully autonomous after reaction trigger.</div>
        <div class="mono" style="font-size:0.75rem;margin-top:0.3rem">../intentguard/src/skills/voice-memo-reactor.ts + ../thetadrivencoach/openclaw/src/runtime.ts</div>
        
        
        
      </div>
    
      <div class="card" style="border-left:3px solid var(--green)">
        <strong>Text ‚Üí Room Dispatch</strong>
        <div class="detail">5-step: message in room channel ‚Üí categorize ‚Üí dispatch ‚Üí poll ‚Üí post output. STDIN mode for running tasks.</div>
        <div class="mono" style="font-size:0.75rem;margin-top:0.3rem">../thetadrivencoach/openclaw/src/runtime.ts:601-657</div>
        
        
        
      </div>
    
      <div class="card" style="border-left:3px solid var(--green)">
        <strong>9 Cognitive Rooms</strong>
        <div class="detail">Builder, Architect, Operator, Vault, Voice, Laboratory, Performer, Network, Navigator. Each with sees/ignores/handoff rules.</div>
        <div class="mono" style="font-size:0.75rem;margin-top:0.3rem">../thetadrivencoach/openclaw/src/channel-manager.ts</div>
        
        
        
      </div>
    
      <div class="card" style="border-left:3px solid var(--green)">
        <strong>ThetaSteer Categorization</strong>
        <div class="detail">12x12 tesseract grid, confidence tiers (GREEN/RED/BLUE), hardness 1-5, model routing. Cascading backends: daemon ‚Üí ollama ‚Üí API.</div>
        <div class="mono" style="font-size:0.75rem;margin-top:0.3rem">../intentguard/src/skills/thetasteer-categorize.ts (382 LOC)</div>
        
        
        
      </div>
    
      <div class="card" style="border-left:3px solid var(--green)">
        <strong>Trust-Debt Pipeline (8 Steps)</strong>
        <div class="detail">Outcome requirements ‚Üí keywords ‚Üí categories ‚Üí presence matrix ‚Üí grades ‚Üí timeline ‚Üí narratives ‚Üí audit. Queen orchestrator.</div>
        <div class="mono" style="font-size:0.75rem;margin-top:0.3rem">../intentguard/src/pipeline/runner.ts + step-0.ts through step-7.ts</div>
        
        
        
      </div>
    
      <div class="card" style="border-left:3px solid var(--green)">
        <strong>Attention Corpus Training</strong>
        <div class="detail">Every voice memo + text message feeds into heat map. Emoji-weighted confidence scoring. Supabase pointers for high-confidence entries.</div>
        <div class="mono" style="font-size:0.75rem;margin-top:0.3rem">../intentguard/src/skills/tesseract-trainer.ts (317 LOC)</div>
        
        
        
      </div>
    </div>
      <h3>What's Built but Not Connected (Yellow)</h3>
      <div class="tile-grid">
      <div class="card" style="border-left:3px solid var(--yellow)">
        <strong>CEO Loop</strong>
        <div class="detail">Always-on autonomous loop: scan spec ‚Üí find todos ‚Üí score priority ‚Üí dispatch Claude Flow agents ‚Üí auto-commit ‚Üí tweet. 15s cooldown, 5 concurrent max, circuit breaker at 3 failures.</div>
        <div class="mono" style="font-size:0.75rem;margin-top:0.3rem">../intentguard/src/ceo-loop.ts (750+ LOC)</div>
        <div style="margin-top:0.3rem;font-size:0.85rem;color:var(--accent)">BLOCKER: Needs .env filled + Discord round-trip tested</div>
        
        
      </div>
    
      <div class="card" style="border-left:3px solid var(--yellow)">
        <strong>Night Shift Scheduler</strong>
        <div class="detail">Ghost User that injects synthetic prompts when system is quiet. Safe tasks (tests, reports, dead link scans) auto-execute if sovereignty > 0.6. Dangerous tasks need admin blessing.</div>
        <div class="mono" style="font-size:0.75rem;margin-top:0.3rem">../intentguard/src/cron/scheduler.ts</div>
        <div style="margin-top:0.3rem;font-size:0.85rem;color:var(--accent)">BLOCKER: CEO Loop must be running first</div>
        
        
      </div>
    
      <div class="card" style="border-left:3px solid var(--yellow)">
        <strong>FIM Geometric Auth</strong>
        <div class="detail">20-dimensional identity vector, computeOverlap(), action requirement map, sovereignty scoring from pipeline step 4. Default action thresholds defined.</div>
        <div class="mono" style="font-size:0.75rem;margin-top:0.3rem">../intentguard/src/auth/geometric.ts</div>
        <div style="margin-top:0.3rem;font-size:0.85rem;color:var(--accent)">BLOCKER: Needs integration test ‚Äî proxy intercepts tool call, checks FIM, forwards</div>
        
        
      </div>
    
      <div class="card" style="border-left:3px solid var(--yellow)">
        <strong>Steering Loop (Ask-and-Predict)</strong>
        <div class="detail">Three tiers: Admin (instant), Trusted (30s countdown), General (suggestion only). Voice memo redirect aborts + replans. Conflict logged to #vault.</div>
        <div class="mono" style="font-size:0.75rem;margin-top:0.3rem">../intentguard/src/discord/steering-loop.ts</div>
        <div style="margin-top:0.3rem;font-size:0.85rem;color:var(--accent)">BLOCKER: Needs authorized-handles.ts wired + Discord gateway intent</div>
        
        
      </div>
    
      <div class="card" style="border-left:3px solid var(--yellow)">
        <strong>Federation Handshake</strong>
        <div class="detail">Two bots exchange identity vectors, compute cosine similarity, accept if overlap >= 0.8. Registry tracks federated bots with periodic drift checks.</div>
        <div class="mono" style="font-size:0.75rem;margin-top:0.3rem">../intentguard/src/federation/handshake.ts + tensor-overlap.ts + registry.ts</div>
        <div style="margin-top:0.3rem;font-size:0.85rem;color:var(--accent)">BLOCKER: No second bot to federate with yet</div>
        
        
      </div>
    
      <div class="card" style="border-left:3px solid var(--yellow)">
        <strong>Tesseract Grid Client</strong>
        <div class="detail">HTTP client for tesseract.nu API. Fetches grid state (cell pressures), pushes pointer events (bot actions ‚Üí grid updates).</div>
        <div class="mono" style="font-size:0.75rem;margin-top:0.3rem">../intentguard/src/grid/tesseract-client.ts + hot-cell-router.ts + ascii-renderer.ts</div>
        <div style="margin-top:0.3rem;font-size:0.85rem;color:var(--accent)">BLOCKER: tesseract.nu API not yet deployed</div>
        
        
      </div>
    </div>
      <h3>What's Missing (Red ‚Äî Must Build)</h3>
      <div class="tile-grid">
      <div class="card" style="border-left:3px solid var(--red)">
        <strong>Graceful Shutdown + PID Tracking</strong>
        <div class="detail">Background Claude CLI processes survive parent death. No process.on('exit') handler. Child PIDs not tracked in task store. ISS-04.</div>
        
        
        <div style="margin-top:0.3rem;font-size:0.85rem;color:var(--accent)">FIX: Add PID field to OrchestratorTask. process.on('exit', killAllChildren). Track in JSONL.</div>
        <div class="mono" style="font-size:0.75rem;margin-top:0.3rem">Modify: ../thetadrivencoach/openclaw/src/task-store.ts + ../thetadrivencoach/openclaw/src/runtime.ts</div>
      </div>
    
      <div class="card" style="border-left:3px solid var(--red)">
        <strong>Discord Rate Limiter</strong>
        <div class="detail">No rate limiting on message posting. Swarm output bursts will hit 429. ISS-05.</div>
        
        
        <div style="margin-top:0.3rem;font-size:0.85rem;color:var(--accent)">FIX: Token bucket with exponential backoff. discord.js built-in handles most, but custom posting (output-poller, ceo-loop) needs manual throttle.</div>
        <div class="mono" style="font-size:0.75rem;margin-top:0.3rem">Modify: New file: ../intentguard/src/discord/rate-limiter.ts</div>
      </div>
    
      <div class="card" style="border-left:3px solid var(--red)">
        <strong>launchd Daemon (Always-On)</strong>
        <div class="detail">No process supervisor. If IntentGuard crashes at 3am, it stays dead until morning. Mac Mini needs KeepAlive + RunAtLoad.</div>
        
        
        <div style="margin-top:0.3rem;font-size:0.85rem;color:var(--accent)">FIX: Write com.intentguard.sovereign-engine.plist ‚Üí ~/Library/LaunchAgents/. KeepAlive=true, RunAtLoad=true, StandardOutPath=logs/.</div>
        <div class="mono" style="font-size:0.75rem;margin-top:0.3rem">Modify: New file: ../intentguard/scripts/install-daemon.sh + ../intentguard/config/launchd.plist</div>
      </div>
    
      <div class="card" style="border-left:3px solid var(--red)">
        <strong>Reconnection Logic</strong>
        <div class="detail">Discord gateway disconnects are not handled. WebSocket to OpenClaw has no reconnect. WiFi blip = dead bot.</div>
        
        
        <div style="margin-top:0.3rem;font-size:0.85rem;color:var(--accent)">FIX: discord.js has built-in reconnect. OpenClaw WS needs manual reconnect with exponential backoff (1s, 2s, 4s, 8s, max 60s).</div>
        <div class="mono" style="font-size:0.75rem;margin-top:0.3rem">Modify: ../intentguard/src/wrapper.ts (WS reconnect) + ../intentguard/src/runtime.ts (Discord reconnect)</div>
      </div>
    
      <div class="card" style="border-left:3px solid var(--red)">
        <strong>Cost Guard</strong>
        <div class="detail">No spending cap. CEO loop + night shift can burn unlimited Anthropic API credits overnight. Need daily/hourly budget with auto-throttle.</div>
        
        
        <div style="margin-top:0.3rem;font-size:0.85rem;color:var(--accent)">FIX: cost-reporter.ts exists but not wired to enforcement. Add daily budget config, auto-switch to ollama when budget exceeded.</div>
        <div class="mono" style="font-size:0.75rem;margin-top:0.3rem">Modify: ../intentguard/src/skills/cost-reporter.ts + ../intentguard/src/skills/llm-controller.ts</div>
      </div>
    </div>
      <h3>Activation Sequence (Getting from Yellow to Green)</h3>
      <div class="protocol-flow">
        
          <div class="protocol-step">
            <div class="step-number">1</div>
            <div class="step-content"><strong>Fill .env and test Discord round-trip ‚Äî Bot joins server, creates 9 room channels, responds to !ping. Takes 30 minutes.</strong></div>
          </div>
        
          <div class="protocol-step">
            <div class="step-number">2</div>
            <div class="step-content"><strong>brew install ffmpeg ‚Äî Unblocks local Whisper transcription. Saves $0.003/call on every voice memo. ISS-01.</strong></div>
          </div>
        
          <div class="protocol-step">
            <div class="step-number">3</div>
            <div class="step-content"><strong>Wire CEO loop to runtime.ts ‚Äî Import ceo-loop.ts, call startCeoLoop() after Discord ready event. Reads spec, finds todos, dispatches agents.</strong></div>
          </div>
        
          <div class="protocol-step">
            <div class="step-number">4</div>
            <div class="step-content"><strong>Wire night shift scheduler ‚Äî Import scheduler.ts, inject into SteeringLoop. Ghost User generates safe tasks when system idle > 5 minutes.</strong></div>
          </div>
        
          <div class="protocol-step">
            <div class="step-number">5</div>
            <div class="step-content"><strong>Integration test FIM proxy ‚Äî Verify: tool call ‚Üí geometric.ts overlap check ‚Üí allow/deny ‚Üí audit log. One passing test = green light.</strong></div>
          </div>
        
          <div class="protocol-step">
            <div class="step-number">6</div>
            <div class="step-content"><strong>Install launchd daemon ‚Äî Run scripts/install-daemon.sh. Verify: kill process ‚Üí launchd restarts within 10s. KeepAlive proven.</strong></div>
          </div>
        
          <div class="protocol-step">
            <div class="step-number">7</div>
            <div class="step-content"><strong>Add cost guard ‚Äî Set daily budget ($5 default). Auto-fallback to ollama when budget exceeded. Test: burn $5 in test mode, verify throttle kicks in.</strong></div>
          </div>
        
          <div class="protocol-step">
            <div class="step-number">8</div>
            <div class="step-content"><strong>24h soak test ‚Äî Run for 24 hours. Review: sovereignty stability, task completion rate, cost, Discord rate limit hits, crash count. Green if: 0 crashes, sovereignty stable, cost under $10.</strong></div>
          </div>
        
      </div>
    </section>
  
    <section>
      <h2>CEO Loop & Night Shift Architecture</h2>
      <div class="callout"><strong>The CEO Loop is the heartbeat of autonomous operation. It never stops. When there's work, it dispatches. When there's no work, it watches. At midnight, it summarizes. This is the "self-driving" in "full practical self-driving."</strong></div>
      <h3>CEO Loop State Machine</h3>
      <div class="tile-grid">
        
          <div class="card" style="border-left:3px solid var(--green)">
            <div class="card-header">
              <span><strong>ACTIVE</strong></span>
              <span class="badge badge-complete">15s cooldown</span>
            </div>
            <div style="margin:0.3rem 0"><strong>1.</strong> Read spec file ‚Üí find actionable todos (non-future, not failed, not blocked)</div><div style="margin:0.3rem 0"><strong>2.</strong> Score: urgency √ó impact √ó dependency-free</div><div style="margin:0.3rem 0"><strong>3.</strong> If too vague ‚Üí subdivide into 3-5 concrete subtasks</div><div style="margin:0.3rem 0"><strong>4.</strong> Dispatch via Claude Flow agent pool (max 5 concurrent)</div><div style="margin:0.3rem 0"><strong>5.</strong> On complete: mark done, auto-commit, tweet ShortRank</div><div style="margin:0.3rem 0"><strong>6.</strong> On failure: skip, record, circuit breaker at 3 consecutive</div>
            <div class="mono" style="font-size:0.75rem;margin-top:0.5rem">../intentguard/src/ceo-loop.ts:623-750</div>
          </div>
        
          <div class="card" style="border-left:3px solid var(--yellow)">
            <div class="card-header">
              <span><strong>IDLE</strong></span>
              <span class="badge badge-building">60s scan</span>
            </div>
            <div style="margin:0.3rem 0"><strong>1.</strong> All todos done ‚Üí watch spec every 60s</div><div style="margin:0.3rem 0"><strong>2.</strong> Heartbeat every 5min to Discord</div><div style="margin:0.3rem 0"><strong>3.</strong> Ghost User (scheduler) injects synthetic tasks after 5min idle</div><div style="margin:0.3rem 0"><strong>4.</strong> New todo appears ‚Üí switch to ACTIVE</div>
            <div class="mono" style="font-size:0.75rem;margin-top:0.5rem">../intentguard/src/cron/scheduler.ts</div>
          </div>
        
      </div>
      <h3>CEO Loop Config</h3>
      <pre>{
  "cooldownSec": 15,           // Wait between task dispatches
  "idleScanIntervalSec": 60,   // Scan spec when idle
  "heartbeatIntervalSec": 300, // Post status every 5 min
  "maxConcurrent": 5,          // Max parallel Claude Flow agents
  "skipFuturePhases": true,    // Ignore future-dated todos
  "maxConsecutiveFailures": 3, // Circuit breaker
  "autoCommit": true,          // Auto git-commit on completion
  "nightlySummary": true       // Summary at midnight
}</pre>
      <div class="detail">Source: <span class="mono">../intentguard/src/ceo-loop.ts:93-101</span></div>
      <h3>Night Shift Task Classification</h3>
      <div class="tile-grid">
        <div class="card" style="border-left:3px solid var(--green)">
          <div class="card-header"><span><strong>Safe Tasks</strong> (auto-execute if sovereignty &gt; 0.6)</span></div>
          <div style="margin:0.3rem 0">Write unit tests for untested modules</div><div style="margin:0.3rem 0">Scan spec for stale/blocked items</div><div style="margin:0.3rem 0">Generate trust-debt reports</div><div style="margin:0.3rem 0">Check dead links in docs</div><div style="margin:0.3rem 0">Update room context summaries</div><div style="margin:0.3rem 0">Run FIM benchmark</div><div style="margin:0.3rem 0">Tweet heartbeat status</div>
          <div class="detail" style="margin-top:0.3rem">Tier: <strong>trusted</strong> ‚Äî auto-execute after 30s countdown, no human needed</div>
        </div>
        <div class="card" style="border-left:3px solid var(--red)">
          <div class="card-header"><span><strong>Dangerous Tasks</strong> (sovereignty &gt; 0.9 OR admin blessing)</span></div>
          <div style="margin:0.3rem 0">Refactor core modules</div><div style="margin:0.3rem 0">Modify runtime configuration</div><div style="margin:0.3rem 0">Deploy / push to remote</div><div style="margin:0.3rem 0">Delete files</div><div style="margin:0.3rem 0">Modify auth/permission logic</div>
          <div class="detail" style="margin-top:0.3rem">Tier: <strong>general</strong> ‚Äî queued until admin blessing</div>
        </div>
      </div>
      <h3>Auto-Commit Protocol</h3>
      <div class="card">
        <div style="margin:0.3rem 0"><strong>When:</strong> <span class="detail">CEO loop task completes successfully</span></div>
        <div style="margin:0.3rem 0"><strong>How:</strong> <code>git add -A && git commit -m "${message}\n\nCo-Authored-By: IntentGuard CEO Loop <ceo@intentguard.local>"</code></div>
        <div style="margin:0.3rem 0"><strong>Push:</strong> <span class="detail">DANGEROUS ‚Äî only with sovereignty > 0.9 or explicit admin blessing</span></div>
        <div style="margin:0.3rem 0"><strong>Audit:</strong> <span class="detail">Session stats saved to data/ceo-session-stats.json, log to logs/ceo-loop.log</span></div>
      </div>
      <div class="detail" style="margin-top:0.3rem">Source: <span class="mono">../intentguard/src/ceo-loop.ts:589-617</span></div>
    </section>
  
    <section>
      <h2>Geometric IAM Integration Map</h2>
      <div class="callout"><strong>How FIM, ThetaSteer, Trust-Debt, and Federation actually connect. This is the wiring diagram ‚Äî not pseudocode, but the real data flow between existing TypeScript modules.</strong></div>
      <h3>Data Flow: Signal &rarr; Identity &rarr; Permission</h3>
      <div class="protocol-flow">
        
          <div class="protocol-step">
            <div class="step-number">1</div>
            <div class="step-content">
              <strong>Signal arrives (voice memo, text, tool call, git commit)</strong>
              
              <br><span class="mono">../intentguard/src/runtime.ts</span>
            </div>
          </div>
        
          <div class="protocol-step">
            <div class="step-number">2</div>
            <div class="step-content">
              <strong>ThetaSteer categorizes ‚Üí returns {tile_id, confidence, tier, hardness, trustDimensions[]}</strong>
              <br><span class="detail">Maps tile to 2-3 of 20 trust-debt categories (e.g., B2 ‚Üí communication, collaboration, user_focus)</span>
              <br><span class="mono">../intentguard/src/skills/thetasteer-categorize.ts:29-42</span><br><span class="mono">../intentguard/src/skills/thetasteer-categorize.ts:45-55</span>
            </div>
          </div>
        
          <div class="protocol-step">
            <div class="step-number">3</div>
            <div class="step-content">
              <strong>Tesseract trainer updates heat map ‚Äî weight = confidence √ó emoji_weight √ó source_weight</strong>
              <br><span class="detail">Corpus entry saved to data/attention-corpus/</span>
              <br><span class="mono">../intentguard/src/skills/tesseract-trainer.ts</span>
            </div>
          </div>
        
          <div class="protocol-step">
            <div class="step-number">4</div>
            <div class="step-content">
              <strong>Trust-Debt Pipeline runs (periodically or on-demand) ‚Üí outputs grades per category</strong>
              <br><span class="detail">Grades map to sovereignty: A+=1.0, B=0.8, C=0.6, D=0.4, F=0.2</span>
              <br><span class="mono">../intentguard/src/pipeline/runner.ts</span><br><span class="mono">4-grades-statistics.json</span>
            </div>
          </div>
        
          <div class="protocol-step">
            <div class="step-number">5</div>
            <div class="step-content">
              <strong>Identity vector loads from pipeline ‚Üí 20-dimensional vector (one score per trust-debt category)</strong>
              <br><span class="detail">Called at startup</span>
              <br><span class="mono">../intentguard/src/auth/geometric.ts:204-261</span><br><span class="mono">../intentguard/src/runtime.ts:38</span>
            </div>
          </div>
        
          <div class="protocol-step">
            <div class="step-number">6</div>
            <div class="step-content">
              <strong>Tool call triggers FIM check ‚Äî computeOverlap(identity, actionRequirement)</strong>
              <br><span class="detail">Action requirements: geometric.ts:128-189 (shell_execute, git_push, git_force_push, deploy, etc.)</span><br><span class="detail">Check: overlap >= 0.8 AND sovereignty >= minSovereignty ‚Üí ALLOW, else ‚Üí DENY</span>
              <br><span class="mono">../intentguard/src/auth/geometric.ts:97-123</span>
            </div>
          </div>
        
          <div class="protocol-step">
            <div class="step-number">7</div>
            <div class="step-content">
              <strong>Denial feeds back into pipeline ‚Äî drift event recorded, sovereignty recalculated</strong>
              <br><span class="detail">Transparency engine posts to #trust-debt-public</span>
              <br><span class="mono">../intentguard/src/discord/transparency-engine.ts</span>
            </div>
          </div>
        
      </div>
      <h3>The 20 Trust-Debt Categories (Identity Vector Dimensions)</h3>
      <div class="card">
        <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:0.3rem;font-size:0.8rem">
          <div><span class="badge badge-complete">0</span> security</div><div><span class="badge badge-complete">1</span> reliability</div><div><span class="badge badge-complete">2</span> data_integrity</div><div><span class="badge badge-complete">3</span> process_adherence</div><div><span class="badge badge-complete">4</span> code_quality</div><div><span class="badge badge-complete">5</span> testing</div><div><span class="badge badge-complete">6</span> documentation</div><div><span class="badge badge-complete">7</span> communication</div><div><span class="badge badge-complete">8</span> time_management</div><div><span class="badge badge-complete">9</span> resource_efficiency</div><div><span class="badge badge-complete">10</span> risk_assessment</div><div><span class="badge badge-complete">11</span> compliance</div><div><span class="badge badge-complete">12</span> innovation</div><div><span class="badge badge-complete">13</span> collaboration</div><div><span class="badge badge-complete">14</span> accountability</div><div><span class="badge badge-complete">15</span> transparency</div><div><span class="badge badge-complete">16</span> adaptability</div><div><span class="badge badge-complete">17</span> domain_expertise</div><div><span class="badge badge-complete">18</span> user_focus</div><div><span class="badge badge-complete">19</span> ethical_alignment</div>
        </div>
        <div class="detail" style="margin-top:0.5rem">Source: <span class="mono">../intentguard/src/auth/geometric.ts:25-31</span></div>
      </div>
      <h3>ThetaSteer &rarr; Trust-Debt Category Mapping</h3>
      <table>
        <thead><tr><th>Tesseract Tile</th><th>Grid Name</th><th>Trust-Debt Categories</th><th>Primary Room</th></tr></thead>
        <tbody>
          <tr><td><span class="mono">A1</span></td><td>Strategy.Law</td><td>compliance, security, risk_assessment</td><td>vault</td></tr><tr><td><span class="mono">A2</span></td><td>Strategy.Goal</td><td>accountability, time_management</td><td>architect</td></tr><tr><td><span class="mono">A3</span></td><td>Strategy.Fund</td><td>resource_efficiency, domain_expertise</td><td>performer</td></tr><tr><td><span class="mono">B1</span></td><td>Tactics.Speed</td><td>adaptability, reliability</td><td>voice</td></tr><tr><td><span class="mono">B2</span></td><td>Tactics.Deal</td><td>communication, collaboration, user_focus</td><td>network</td></tr><tr><td><span class="mono">B3</span></td><td>Tactics.Signal</td><td>transparency, ethical_alignment</td><td>navigator</td></tr><tr><td><span class="mono">C1</span></td><td>Operations.Grid</td><td>code_quality, testing, data_integrity</td><td>builder</td></tr><tr><td><span class="mono">C2</span></td><td>Operations.Loop</td><td>process_adherence, innovation</td><td>laboratory</td></tr><tr><td><span class="mono">C3</span></td><td>Operations.Flow</td><td>reliability, documentation</td><td>operator</td></tr>
        </tbody>
      </table>
      <div class="detail" style="margin-top:0.3rem">This is how voice memos become identity updates: reaction on voice memo ‚Üí ThetaSteer categorizes ‚Üí maps to trust-debt categories ‚Üí heat map updates ‚Üí pipeline re-runs ‚Üí sovereignty recalculates ‚Üí FIM permissions shift.</div>
      <h3>Federation: Bot-to-Bot Trust via Tensor Overlap</h3>
      <div class="card">
        <div style="margin:0.3rem 0"><strong>Handshake:</strong> <span class="detail">Two bots exchange 20-dimensional identity vectors</span></div><div style="margin:0.3rem 0"><strong>Overlap:</strong> <span class="detail">Cosine similarity computed ‚Äî threshold 0.8 for trust, <0.8 rejected</span></div><div style="margin:0.3rem 0"><strong>Alignment:</strong> <span class="detail">Categories within 0.2 difference = aligned. >0.4 = divergent.</span></div><div style="margin:0.3rem 0"><strong>DriftMonitoring:</strong> <span class="detail">Periodic re-checks. If overlap drops below threshold ‚Üí quarantine.</span></div><div style="margin:0.3rem 0"><strong>UseCase:</strong> <span class="detail">Two IntentGuard instances running in different companies can federate ‚Äî sharing categorization insights while maintaining sovereignty.</span></div>
      </div>
      <div class="detail" style="margin-top:0.3rem">Source: <span class="mono">../intentguard/src/federation/tensor-overlap.ts</span>, <span class="mono">../intentguard/src/federation/handshake.ts:88-129</span>, <span class="mono">../intentguard/src/federation/registry.ts</span></div>
    </section>
  
    <section>
      <h2>Source File Reference (Complete)</h2>
      <div class="detail">All paths relative to ../intentguard/ (the IntentGuard repo root). OpenClaw paths are ../thetadrivencoach/openclaw/.</div>
      <h3>IntentGuard Core</h3>
      <table>
        <thead><tr><th>File</th><th>LOC</th><th>Purpose</th><th>Status</th></tr></thead>
        <tbody>
          <tr><td><span class="mono">src/runtime.ts</span></td><td>1,035</td><td>Main orchestrator: Discord client, 9 rooms, task store, steering loop, transparency</td><td><span class="badge badge-complete">live</span></td></tr><tr><td><span class="mono">src/wrapper.ts</span></td><td>629</td><td>Sovereign Engine: spawns OpenClaw gateway, registers skills, FIM auth plugin</td><td><span class="badge badge-complete">live</span></td></tr><tr><td><span class="mono">src/ceo-loop.ts</span></td><td>750+</td><td>Always-on autonomous loop: scan spec ‚Üí dispatch ‚Üí commit ‚Üí tweet</td><td><span class="badge badge-building">built</span></td></tr><tr><td><span class="mono">src/types.ts</span></td><td>~200</td><td>Shared TypeScript interfaces and types</td><td><span class="badge badge-complete">live</span></td></tr><tr><td><span class="mono">src/auth/geometric.ts</span></td><td>~260</td><td>FIM permission engine: 20-dim identity, overlap computation, action requirements</td><td><span class="badge badge-building">built</span></td></tr><tr><td><span class="mono">src/pipeline/runner.ts</span></td><td>~80</td><td>8-step trust-debt pipeline orchestrator</td><td><span class="badge badge-complete">live</span></td></tr><tr><td><span class="mono">src/pipeline/step-0.ts ‚Äî step-7.ts</span></td><td>~600</td><td>Individual pipeline stages</td><td><span class="badge badge-complete">live</span></td></tr>
        </tbody>
      </table>
      <h3>IntentGuard Discord</h3>
      <table>
        <thead><tr><th>File</th><th>Purpose</th><th>Status</th></tr></thead>
        <tbody>
          <tr><td><span class="mono">src/discord/channel-manager.ts</span></td><td>9 rooms + 4 extra channels, bidirectional mapping</td><td><span class="badge badge-complete">live</span></td></tr><tr><td><span class="mono">src/discord/steering-loop.ts</span></td><td>Ask-and-Predict protocol, 3 execution tiers</td><td><span class="badge badge-building">built</span></td></tr><tr><td><span class="mono">src/discord/task-store.ts</span></td><td>JSONL persistence, replay, kill switch</td><td><span class="badge badge-complete">live</span></td></tr><tr><td><span class="mono">src/discord/transparency-engine.ts</span></td><td>Public trust-debt reporting, spike detection</td><td><span class="badge badge-building">built</span></td></tr><tr><td><span class="mono">src/discord/authorized-handles.ts</span></td><td>Admin handles: thetaking, mortarcombat</td><td><span class="badge badge-complete">live</span></td></tr><tr><td><span class="mono">src/discord/shortrank-notation.ts</span></td><td>ShortRank A-K formatting for Discord</td><td><span class="badge badge-complete">live</span></td></tr><tr><td><span class="mono">src/discord/tweet-composer.ts</span></td><td>280-char tweet generation</td><td><span class="badge badge-complete">live</span></td></tr><tr><td><span class="mono">src/discord/x-poster.ts</span></td><td>X/Twitter cross-posting via browser</td><td><span class="badge badge-building">built</span></td></tr>
        </tbody>
      </table>
      <h3>IntentGuard Skills (13 total: 6 ported + 7 native)</h3>
      <table>
        <thead><tr><th>Skill</th><th>LOC</th><th>Source</th><th>Status</th></tr></thead>
        <tbody>
          <tr><td><span class="mono">src/skills/claude-flow-bridge.ts</span></td><td>729</td><td>ported from openclaw</td><td><span class="badge badge-complete">live</span></td></tr><tr><td><span class="mono">src/skills/voice-memo-reactor.ts</span></td><td>228</td><td>ported from openclaw</td><td><span class="badge badge-complete">live</span></td></tr><tr><td><span class="mono">src/skills/thetasteer-categorize.ts</span></td><td>382</td><td>ported from openclaw</td><td><span class="badge badge-complete">live</span></td></tr><tr><td><span class="mono">src/skills/llm-controller.ts</span></td><td>412</td><td>ported from openclaw</td><td><span class="badge badge-building">partial</span></td></tr><tr><td><span class="mono">src/skills/system-control.ts</span></td><td>481</td><td>ported from openclaw</td><td><span class="badge badge-complete">live</span></td></tr><tr><td><span class="mono">src/skills/tesseract-trainer.ts</span></td><td>317</td><td>ported from openclaw</td><td><span class="badge badge-complete">live</span></td></tr><tr><td><span class="mono">src/skills/email-outbound.ts</span></td><td>165</td><td>native</td><td><span class="badge badge-building">built</span></td></tr><tr><td><span class="mono">src/skills/artifact-generator.ts</span></td><td>256</td><td>native</td><td><span class="badge badge-building">built</span></td></tr><tr><td><span class="mono">src/skills/cost-reporter.ts</span></td><td>480</td><td>native</td><td><span class="badge badge-building">built</span></td></tr><tr><td><span class="mono">src/skills/wallet-ledger.ts</span></td><td>220</td><td>native</td><td><span class="badge badge-building">built</span></td></tr><tr><td><span class="mono">src/skills/wallet.ts</span></td><td>20</td><td>native (skeleton)</td><td><span class="badge badge-pending">todo</span></td></tr><tr><td><span class="mono">src/skills/geometry-converter.ts</span></td><td>293</td><td>native</td><td><span class="badge badge-building">built</span></td></tr><tr><td><span class="mono">src/skills/stl-writer.ts</span></td><td>119</td><td>native</td><td><span class="badge badge-building">built</span></td></tr>
        </tbody>
      </table>
      <div class="detail" style="margin-top:0.3rem">Skill registry: ../intentguard/src/skills/registry.json | Sync script: ../intentguard/scripts/sync-skills.sh</div>
      <h3>IntentGuard Federation &amp; Grid</h3>
      <table>
        <thead><tr><th>File</th><th>Purpose</th></tr></thead>
        <tbody>
          <tr><td><span class="mono">src/federation/tensor-overlap.ts</span></td><td>Cosine similarity between identity vectors</td></tr><tr><td><span class="mono">src/federation/handshake.ts</span></td><td>Bot-to-bot handshake protocol</td></tr><tr><td><span class="mono">src/federation/registry.ts</span></td><td>Federated bot registry with drift monitoring</td></tr><tr><td><span class="mono">src/grid/tesseract-client.ts</span></td><td>HTTP client for tesseract.nu API</td></tr><tr><td><span class="mono">src/grid/hot-cell-router.ts</span></td><td>Event routing based on grid pressure</td></tr><tr><td><span class="mono">src/grid/ascii-renderer.ts</span></td><td>Terminal grid visualization</td></tr><tr><td><span class="mono">src/grid/deep-linker.ts</span></td><td>URL generation for grid cells</td></tr>
        </tbody>
      </table>
      <h3>OpenClaw Custom Runtime (thetadrivencoach/openclaw/)</h3>
      <table>
        <thead><tr><th>File</th><th>LOC</th><th>Purpose</th></tr></thead>
        <tbody>
          <tr><td><span class="mono">src/runtime.ts</span></td><td>869</td><td>Discord.js v14 orchestrator, message routing, voice detection</td></tr><tr><td><span class="mono">src/channel-manager.ts</span></td><td>212</td><td>9 room channels, bidirectional mapping, 50-line context buffer</td></tr><tr><td><span class="mono">src/task-store.ts</span></td><td>286</td><td>JSONL event sourcing, restart recovery, kill switch</td></tr><tr><td><span class="mono">src/output-capture.ts</span></td><td>232</td><td>Per-terminal IPC: iTerm, Terminal, Kitty, WezTerm, System Events</td></tr><tr><td><span class="mono">src/output-poller.ts</span></td><td>176</td><td>2000ms polling, shell prompt regex, stabilization detection</td></tr><tr><td><span class="mono">src/clipboard-mutex.ts</span></td><td>116</td><td>Global async lock for System Events rooms</td></tr><tr><td><span class="mono">src/doctor.ts</span></td><td>208</td><td>Pre-flight health: Node>=22, config, env, skills, directories</td></tr><tr><td><span class="mono">src/types.ts</span></td><td>137</td><td>AgentSkill interface, SkillContext, task lifecycle types</td></tr>
        </tbody>
      </table>
      <h3>Config Files</h3>
      <table>
        <thead><tr><th>File</th><th>Purpose</th></tr></thead>
        <tbody>
          <tr><td><span class="mono">../intentguard/intentguard.json</span></td><td>IntentGuard config: 9 skills enabled, autoDiscover, shell/network allowlists</td></tr><tr><td><span class="mono">../thetadrivencoach/openclaw/openclaw.json</span></td><td>OpenClaw config: 6 skills, orchestrator settings, permissions</td></tr><tr><td><span class="mono">../intentguard/package.json</span></td><td>Dependencies: discord.js, openclaw, ws, better-sqlite3, cosine-similarity</td></tr><tr><td><span class="mono">../intentguard/tsconfig.json</span></td><td>ES2022, ESNext modules, strict, bundler resolution</td></tr>
        </tbody>
      </table>
    </section>
  
    <section>
      <h2>Overnight Sonnet Prompt Document</h2>
      <div class="callout"><strong>This section IS the prompt. Copy this to a Sonnet session to run overnight autonomous documentation and behavior improvement work. All file paths are verified. No code changes ‚Äî documentation only.</strong></div>
      <h3>Prompt: Night Shift Documentation Sprint</h3>
      <pre style="font-size:0.75rem;color:var(--text);white-space:pre-wrap">You are Claude Sonnet working overnight on the IntentGuard project.
Your workspace: /Users/thetadriven/github/IntentGuard/

## YOUR MISSION
Write documentation files and improve Discord message templates.
Do NOT modify any .ts or .json files. Only create/edit .md files in docs/.
Do NOT push to remote. Only commit locally.

## TASK 1: Discord Message Behavior Spec (docs/DISCORD-MESSAGE-SPEC.md)
Read these source files and document every Discord message pattern:
- src/skills/voice-memo-reactor.ts (lines 176-206) ‚Äî voice memo response
- src/ceo-loop.ts (lines 566-580) ‚Äî tweet posting, room dispatch
- src/discord/steering-loop.ts ‚Äî ask-and-predict messages
- src/discord/transparency-engine.ts ‚Äî trust-debt spike reports
- ../thetadrivencoach/openclaw/src/runtime.ts (lines 437, 634) ‚Äî task dispatch, categorization
- ../thetadrivencoach/openclaw/src/output-poller.ts (lines 152-174) ‚Äî task completion

For each message type, document:
1. Current format (exact string template)
2. Improved format (following rules from Section 17 of this spec)
3. Which file and line to modify
4. Why the improvement matters for the CEO briefing use case

## TASK 2: Skill Documentation (docs/skills/)
Read each skill file and create a per-skill README:
- docs/skills/CLAUDE-FLOW-BRIDGE.md ‚Äî src/skills/claude-flow-bridge.ts (729 LOC)
- docs/skills/VOICE-MEMO-REACTOR.md ‚Äî src/skills/voice-memo-reactor.ts (228 LOC)
- docs/skills/THETASTEER-CATEGORIZE.md ‚Äî src/skills/thetasteer-categorize.ts (382 LOC)
- docs/skills/SYSTEM-CONTROL.md ‚Äî src/skills/system-control.ts (481 LOC)
- docs/skills/TESSERACT-TRAINER.md ‚Äî src/skills/tesseract-trainer.ts (317 LOC)
- docs/skills/LLM-CONTROLLER.md ‚Äî src/skills/llm-controller.ts (412 LOC)

Each README must include: purpose, commands/actions, config, dependencies,
known issues, and code examples.

## TASK 3: Architecture Doc (docs/ARCHITECTURE.md)
Document the two-process architecture:
- IntentGuard (Cortex) at src/wrapper.ts ‚Üí spawns OpenClaw (Body)
- OpenClaw gateway at ws://127.0.0.1:18789
- 9 cognitive rooms with IPC methods
- FIM auth layer at src/auth/geometric.ts
- Trust-debt pipeline at src/pipeline/
- CEO loop at src/ceo-loop.ts
- Night shift scheduler at src/cron/scheduler.ts
Include a plain-text architecture diagram.

## TASK 4: Activation Checklist (docs/ACTIVATION-CHECKLIST.md)
Step-by-step guide to go from "built" to "running":
1. Fill .env (what vars are needed ‚Äî check intentguard.json)
2. brew install ffmpeg
3. Start bot: npx tsx src/runtime.ts
4. Verify: !ping in Discord
5. Enable CEO loop
6. Install launchd daemon
7. 24h soak test criteria

## TASK 5: Business Context (docs/BUSINESS-CONTEXT.md)
Read docs/patents/PATENTS.md, docs/patents/NATURE_PAPER_STRATEGY.md,
docs/01-business/INTENTGUARD_BUSINESS_PLAN.md and synthesize into:
- One-page business summary
- Patent portfolio summary
- Revenue strategy (3 phases)
- How the bot proves the patent works

## RULES
- Read files BEFORE writing about them
- Include file:line references for every claim
- Do NOT add emojis to prose (use in code templates only)
- Commit each task separately with descriptive messages
- Do NOT push to remote</pre>
    </section>
  
    <section>
      <h2>OpenClaw NPM Gateway Integration (2026-02-15)</h2>
      <div class="callout"><strong>Migration from custom runtime to OpenClaw NPM package complete. The 3,418 LOC custom code is now complemented by OpenClaw's 196K-star production gateway. Custom skills ported to workspace format. Sonnet 4 connected via claude-max-api-proxy at $0/token.</strong></div>
      <h3>4-Layer Architecture (Live)</h3>
      <table>
        <tr><th>Layer</th><th>Component</th><th>Port</th><th>Manager</th><th>Status</th></tr>
        <tr><td>1</td><td>IntentGuard (Bot CEO)</td><td>-</td><td>Manual</td><td><span class="badge badge-building">Building</span></td></tr><tr><td>2</td><td>Claude Flow v3 (90 MCP tools)</td><td>-</td><td>CLI</td><td><span class="badge badge-active">Installed</span></td></tr><tr><td>3</td><td>OpenClaw Gateway (54 skills)</td><td>18789</td><td>launchd</td><td><span class="badge badge-active">Live</span></td></tr><tr><td>4</td><td>claude-max-api-proxy (Sonnet 4)</td><td>3456</td><td>launchd</td><td><span class="badge badge-active">Live</span></td></tr>
      </table>
      <h3>Custom Skills Ported to OpenClaw Workspace</h3>
      <table>
        <tr><th>Skill</th><th>Source</th><th>Format</th><th>Status</th></tr>
        <tr><td>terminal-dispatch</td><td>Custom TypeScript (286 LOC)</td><td>SKILL.md + dispatch.sh</td><td><span class="badge badge-complete">Ready</span></td></tr><tr><td>output-capture</td><td>Custom TypeScript (232 LOC)</td><td>SKILL.md + capture.sh</td><td><span class="badge badge-complete">Ready</span></td></tr><tr><td>thetasteer-categorize</td><td>Custom TypeScript (423 LOC)</td><td>SKILL.md (prompt-based)</td><td><span class="badge badge-complete">Ready</span></td></tr><tr><td>claude-flow-bridge</td><td>New</td><td>SKILL.md (CLI wrapper)</td><td><span class="badge badge-complete">Ready</span></td></tr>
      </table>
      <h3>Bundled Skills Available (12 Ready)</h3>
      <div class="channel-bar">
        <span class="channel-chip active">coding-agent</span><span class="channel-chip active">github</span><span class="channel-chip active">tmux</span><span class="channel-chip active">openai-whisper-api</span><span class="channel-chip active">session-logs</span><span class="channel-chip active">1password</span><span class="channel-chip active">healthcheck</span><span class="channel-chip active">himalaya</span><span class="channel-chip active">skill-creator</span><span class="channel-chip active">video-frames</span><span class="channel-chip active">weather</span><span class="channel-chip active">openai-image-whisper</span>
        <span class="channel-chip">37 more available</span>
      </div>
      <h3>Workspace Bootstrap Files</h3>
      <table>
        <tr><th>File</th><th>Purpose</th></tr>
        <tr><td><span class="mono">BOOTSTRAP.md</span></td><td>Operating instructions ‚Äî categorize, route, dispatch, capture, respond sequence</td></tr><tr><td><span class="mono">IDENTITY.md</span></td><td>Tesseract identity ‚Äî cognitive room orchestrator</td></tr><tr><td><span class="mono">USER.md</span></td><td>Elias profile ‚Äî projects, preferences, Discord IDs</td></tr><tr><td><span class="mono">TOOLS.md</span></td><td>Environment notes ‚Äî terminal apps, services, paths, models</td></tr><tr><td><span class="mono">SOUL.md</span></td><td>Behavioral guidelines (OpenClaw default, customized)</td></tr>
      </table>
      <h3>Persistent Services (Survive Reboot)</h3>
      <table>
        <tr><th>Service</th><th>launchd Label</th><th>Port</th><th>What</th></tr>
        <tr><td>OpenClaw Gateway</td><td>ai.openclaw.gateway</td><td>18789</td><td>AI gateway + Discord + dashboard + 54 skills</td></tr><tr><td>claude-max-api-proxy</td><td>com.claude-max-api</td><td>3456</td><td>Claude Max subscription as OpenAI-compatible API</td></tr><tr><td>Ollama</td><td>(homebrew)</td><td>11434</td><td>Local LLM fallback (llama3.2:1b)</td></tr>
      </table>
      <h3>LLM Routing Configuration</h3>
      <pre>{
  "agents": {
    "defaults": {
      "model": {
        "primary": "openai/claude-sonnet-4",
        "fallbacks": ["ollama/llama3.2:1b"]
      }
    }
  },
  "models": {
    "providers": {
      "openai": {
        "baseUrl": "http://localhost:3456/v1",
        "apiKey": "not-needed",
        "models": [
          { "id": "claude-sonnet-4", "contextWindow": 200000, "cost": { "input": 0, "output": 0 } },
          { "id": "claude-opus-4",   "contextWindow": 200000, "cost": { "input": 0, "output": 0 } }
        ]
      }
    }
  }
}</pre>
      <h3>Known Issues Resolved by Migration</h3>
      <table>
        <tr><th>Issue</th><th>Before</th><th>After</th><th>Status</th></tr>
        <tr><td>ISS-01: ffmpeg missing</td><td>No voice memo transcription</td><td>openai-whisper-api skill bundled</td><td><span class="badge badge-resolved">Resolved</span></td></tr><tr><td>ISS-02: heat.json corruption</td><td>[object Object] keys</td><td>File not found (clean slate)</td><td><span class="badge badge-resolved">Resolved</span></td></tr><tr><td>ISS-04: No graceful shutdown</td><td>Custom SIGTERM handler needed</td><td>launchd manages lifecycle</td><td><span class="badge badge-resolved">Resolved</span></td></tr><tr><td>ISS-05: No Discord rate limiting</td><td>Custom implementation needed</td><td>Built into OpenClaw Discord channel</td><td><span class="badge badge-resolved">Resolved</span></td></tr>
      </table>
      <h3>What We Gained</h3>
      <div class="tile-grid">
        <div class="card"><div class="card-header"><strong>Playwright Browser Automation</strong></div><div class="detail">Full computer use via Playwright ‚Äî click, type, screenshot, navigate. 2 browser profiles ready. NOT Anthropic computer use ‚Äî OpenClaw's own implementation.</div></div><div class="card"><div class="card-header"><strong>54 Skills Ecosystem</strong></div><div class="detail">GitHub, tmux, Whisper, 1Password, email (himalaya), session logs, skill creator, coding agent, video frames, weather, and 37 more installable via clawhub.</div></div><div class="card"><div class="card-header"><strong>Dashboard + Web UI</strong></div><div class="detail">Full session viewer, skill browser, config editor, agent status at http://127.0.0.1:18789. Canvas support for visual outputs.</div></div><div class="card"><div class="card-header"><strong>21+ Messaging Channels</strong></div><div class="detail">Discord (live), WhatsApp, Telegram, Signal, iMessage, Teams, Slack, email, SMS, and more. Each just a config entry away.</div></div>
      </div>
      <h3>What Was Preserved</h3>
      <div class="tile-grid">
        <div class="card"><div class="card-header"><strong>9 Cognitive Rooms</strong></div><div class="detail">All room-to-terminal mappings preserved in terminal-dispatch skill. Same IPC methods (AppleScript, kitty socket, WezTerm CLI, System Events).</div></div><div class="card"><div class="card-header"><strong>ThetaSteer Categorization</strong></div><div class="detail">Full 12-category grid (A/B/C x 1/2/3) with confidence tiers and hardness routing. Now prompt-based instead of TypeScript class.</div></div><div class="card"><div class="card-header"><strong>Output Capture + Polling</strong></div><div class="detail">Per-terminal capture with delta detection, stabilization, and poll/wait mode. Clipboard mutex for System Events serialization.</div></div><div class="card"><div class="card-header"><strong>Kill Switch</strong></div><div class="detail">Ctrl+C dispatch to any room via terminal-dispatch --kill. Works across all IPC methods.</div></div>
      </div>
    </section>
  
    <section>
      <h2>CEO / Dev Subdivision ‚Äî Dual-Sonnet Architecture</h2>
      <div class="callout"><strong>Two Sonnet instances running simultaneously at $0/token. The always-on OpenClaw CEO thinks proactively about the spec and codebase. The terminal-based Claude Flow Dev executes changes. They coordinate via a proposals queue ‚Äî CEO writes proposals, Dev implements them. No file conflicts. Maximum velocity.</strong></div>
      <h3>Why This Works</h3>
      <p style="margin:0.5rem 0">With claude-max-api-proxy, every Sonnet token is free (Max subscription flat rate). The bottleneck is no longer cost ‚Äî it's utilization. Right now, Sonnet only runs when someone sends a Discord message. The rest of the time, those tokens sit unused. Cron-driven isolated sessions turn idle time into proactive analysis.</p>
      <h3>The Two Roles</h3>
      <div class="split-cols">
        
          <div class="layer-box">
            <div class="layer-title">CEO (OpenClaw, Always-On)</div>
            <div class="layer-role">Proactive Thinker ‚Äî Reads, Analyzes, Proposes</div>
            <div style="margin:0.3rem 0"><strong>Trigger:</strong> <span class="detail">Cron schedule (every 2-6 hours) + Discord events</span></div><div style="margin:0.3rem 0"><strong>Mode:</strong> <span class="detail">Isolated agent turns ‚Äî full Sonnet with tool access</span></div><div style="margin:0.3rem 0"><strong>Writes to:</strong> <span class="detail">~/.openclaw/workspace/proposals/ (staging area)</span></div><div style="margin:0.3rem 0"><strong>Reads from:</strong> <span class="detail">Spec, source code, logs, git history, proposals archive</span></div><div style="margin:0.3rem 0"><strong>Git access:</strong> <span class="detail">READ ONLY ‚Äî never commits directly</span></div><div style="margin:0.3rem 0"><strong>Reports to:</strong> <span class="detail">Discord #architect channel</span></div>
          </div>
        
          <div class="layer-box">
            <div class="layer-title">DEV (Claude Flow, Terminal)</div>
            <div class="layer-role">Active Builder ‚Äî Codes, Tests, Commits</div>
            <div style="margin:0.3rem 0"><strong>Trigger:</strong> <span class="detail">Human-initiated sessions, proposal queue</span></div><div style="margin:0.3rem 0"><strong>Mode:</strong> <span class="detail">Interactive coding with multi-agent swarms</span></div><div style="margin:0.3rem 0"><strong>Writes to:</strong> <span class="detail">Source code, tests, configs, git commits</span></div><div style="margin:0.3rem 0"><strong>Reads from:</strong> <span class="detail">Everything + proposals queue from CEO</span></div><div style="margin:0.3rem 0"><strong>Git access:</strong> <span class="detail">READ + WRITE ‚Äî full commit/push authority</span></div><div style="margin:0.3rem 0"><strong>Reports to:</strong> <span class="detail">Terminal + Discord #builder channel</span></div>
          </div>
        
      </div>
      <h3>Read/Write Boundary (Conflict Prevention)</h3>
      <table>
        <tr><th>Resource</th><th>CEO (OpenClaw)</th><th>Dev (Claude Flow)</th></tr>
        <tr><td>Migration spec HTML</td><td><span class="badge badge-complete">READ</span> + propose edits</td><td><span class="badge badge-building">WRITE</span> + (implements proposals)</td></tr><tr><td>Source code (src/)</td><td><span class="badge badge-complete">READ</span> + analyze</td><td><span class="badge badge-building">WRITE</span> + (implements changes)</td></tr><tr><td>Proposals directory</td><td><span class="badge badge-building">WRITE</span> + (creates proposals)</td><td><span class="badge badge-complete">READ</span> + (picks up, marks done)</td></tr><tr><td>Git repo</td><td><span class="badge badge-complete">READ</span> + (log, diff, blame)</td><td><span class="badge badge-building">WRITE</span> + (commit, branch, push)</td></tr><tr><td>OpenClaw workspace</td><td><span class="badge badge-building">WRITE</span> + (workspace files)</td><td><span class="badge badge-complete">READ</span> + (context)</td></tr><tr><td>Discord</td><td><span class="badge badge-building">WRITE</span> + (analysis reports)</td><td><span class="badge badge-complete">READ</span> + (notifications)</td></tr><tr><td>Trust Debt pipeline</td><td><span class="badge badge-complete">READ</span> + (trigger analysis)</td><td><span class="badge badge-building">WRITE</span> + (run agents 0-7)</td></tr>
      </table>
      <h3>CEO Cron Jobs (Proactive Analysis)</h3>
      <p style="margin:0.5rem 0">OpenClaw cron supports <strong>isolated sessions</strong> ‚Äî full Sonnet agent turns with file access, tool use, and extended thinking. Each job runs in its own session (<code>cron:&lt;jobId&gt;</code>), analyzes the codebase, and delivers results to Discord.</p>
      <div class="tile-grid">
        
          <div class="card">
            <div class="card-header"><strong>Spec Drift Detector</strong> <span class="badge badge-planned">Every 4h</span></div>
            <div class="detail">Reads intentguard-migration-spec.html and compares against actual source files. Identifies sections that are out of date, features claimed as "live" that aren't implemented, and TODOs that have been completed but not updated. Writes drift report to proposals/.</div>
            <pre style="font-size:0.75rem">{
  "name": "spec-drift-detector",
  "schedule": { "kind": "cron", "expr": "0 */4 * * *" },
  "sessionTarget": "isolated",
  "payload": {
    "kind": "agentTurn",
    "message": "Read /Users/thetadriven/github/IntentGuard/intentguard-migration-spec.html. Compare each claimed status (live/building/planned) against the actual files in the repo. Write a drift report to ~/.openclaw/workspace/proposals/spec-drift-YYYY-MM-DD.md listing: (1) claims that are now stale, (2) features that are live but still marked building, (3) sections that need updating. Be specific with file:line references.",
    "thinking": "high",
    "timeoutSeconds": 300
  },
  "delivery": { "mode": "announce", "channel": "discord" }
}</pre>
          </div>
        
          <div class="card">
            <div class="card-header"><strong>Code Review Scout</strong> <span class="badge badge-planned">Every 6h</span></div>
            <div class="detail">Analyzes recent git commits for code quality issues, security concerns, missing tests, and architectural drift. Writes review findings as proposals for the Dev to act on.</div>
            <pre style="font-size:0.75rem">{
  "name": "code-review-scout",
  "schedule": { "kind": "cron", "expr": "0 */6 * * *" },
  "sessionTarget": "isolated",
  "payload": {
    "kind": "agentTurn",
    "message": "Run git log --oneline -20 in /Users/thetadriven/github/IntentGuard to see recent commits. For each commit, review the diff for: security issues (OWASP top 10), missing error handling, code that contradicts the spec, and opportunities for improvement. Write findings to ~/.openclaw/workspace/proposals/code-review-YYYY-MM-DD.md with specific file:line references and suggested fixes.",
    "thinking": "medium",
    "timeoutSeconds": 300
  },
  "delivery": { "mode": "announce", "channel": "discord" }
}</pre>
          </div>
        
          <div class="card">
            <div class="card-header"><strong>Task Planner</strong> <span class="badge badge-planned">Every 8h</span></div>
            <div class="detail">Reads the spec's "next steps" sections, open GitHub issues, and proposal backlog. Prioritizes and writes a task list for the Dev's next session. Considers dependencies and optimal execution order.</div>
            <pre style="font-size:0.75rem">{
  "name": "task-planner",
  "schedule": { "kind": "cron", "expr": "0 6,14,22 * * *" },
  "sessionTarget": "isolated",
  "payload": {
    "kind": "agentTurn",
    "message": "Read the migration spec at /Users/thetadriven/github/IntentGuard/intentguard-migration-spec.html. Read all files in ~/.openclaw/workspace/proposals/. Read the overnight progress report at ~/.openclaw/workspace/overnight-progress.md. Synthesize a prioritized task list for the next development session. Consider: what's blocking, what's highest impact, and what has dependencies. Write to ~/.openclaw/workspace/proposals/task-plan-YYYY-MM-DD.md.",
    "thinking": "high",
    "timeoutSeconds": 300
  },
  "delivery": { "mode": "announce", "channel": "discord" }
}</pre>
          </div>
        
          <div class="card">
            <div class="card-header"><strong>Trust Debt Monitor</strong> <span class="badge badge-planned">Daily 3AM</span></div>
            <div class="detail">Runs a lightweight Trust Debt analysis ‚Äî checks sovereignty scores, alignment metrics, and drift indicators. Reports anomalies. The full 8-agent pipeline remains a Dev task.</div>
            <pre style="font-size:0.75rem">{
  "name": "trust-debt-monitor",
  "schedule": { "kind": "cron", "expr": "0 3 * * *" },
  "sessionTarget": "isolated",
  "payload": {
    "kind": "agentTurn",
    "message": "Read the Trust Debt pipeline configuration in /Users/thetadriven/github/IntentGuard/trust-debt-pipeline-coms.txt. Check the most recent pipeline output files (0-outcome-requirements.json through 6-analysis-narratives.json). Assess: are scores drifting? Are any categories showing degradation? Write a brief trust debt status report to ~/.openclaw/workspace/proposals/trust-debt-status-YYYY-MM-DD.md.",
    "thinking": "medium",
    "timeoutSeconds": 300
  },
  "delivery": { "mode": "announce", "channel": "discord" }
}</pre>
          </div>
        
      </div>
      <h3>Proposal Queue Protocol</h3>
      <div class="protocol-flow">
        
          <div class="protocol-step">
            <div class="step-number">1</div>
            <div class="step-content">
              <strong>CEO writes proposal</strong>
              <div class="detail">Cron job runs ‚Üí Sonnet analyzes ‚Üí writes to ~/.openclaw/workspace/proposals/<type>-YYYY-MM-DD.md with YAML frontmatter: status (pending/accepted/rejected), priority (1-5), category, estimated effort.</div>
            </div>
          </div>
        
          <div class="protocol-step">
            <div class="step-number">2</div>
            <div class="step-content">
              <strong>CEO announces to Discord</strong>
              <div class="detail">Delivery mode "announce" posts a summary to #architect channel. Elias sees it in Discord, can react or respond.</div>
            </div>
          </div>
        
          <div class="protocol-step">
            <div class="step-number">3</div>
            <div class="step-content">
              <strong>Dev picks up proposal</strong>
              <div class="detail">Next Claude Flow session reads proposals/ directory. Pending proposals become the task backlog. Dev marks status as "accepted" and implements.</div>
            </div>
          </div>
        
          <div class="protocol-step">
            <div class="step-number">4</div>
            <div class="step-content">
              <strong>Dev marks complete</strong>
              <div class="detail">After implementation, Dev updates proposal YAML frontmatter to status: completed with implementation notes. CEO's next run sees the updated status.</div>
            </div>
          </div>
        
      </div>
      <h3>Velocity Multiplier Analysis</h3>
      <table>
        <tr><th>Without CEO</th><th>With CEO</th><th>Velocity Gain</th></tr>
        <tr><td>Dev discovers spec drift during coding</td><td>CEO already identified drift 4h ago</td><td>No context switching</td></tr><tr><td>Dev manually reviews recent commits</td><td>CEO reviewed overnight, flagged issues</td><td>Dev starts with known issues</td></tr><tr><td>Dev decides task priority ad-hoc</td><td>CEO prepared prioritized task plan</td><td>Instant session start</td></tr><tr><td>Security issues found in production</td><td>CEO caught in code review scout</td><td>Shift-left detection</td></tr><tr><td>Spec gets stale over days</td><td>CEO proposes updates every 4h</td><td>Living documentation</td></tr><tr><td>Trust Debt checked manually</td><td>CEO monitors daily at 3AM</td><td>Continuous governance</td></tr>
      </table>
      <p style="margin:0.5rem 0;color:var(--muted);font-size:0.85rem"><strong>Estimated velocity increase: 2-3x ‚Äî Dev sessions start pre-loaded with analysis, task plans, and known issues. No ramp-up time. No wasted cycles discovering what CEO already found. Both Sonnet instances cost $0.</strong></p>
      <h3>Activation Commands</h3>
      <pre style="font-size:0.8rem"># Create proposals directory
mkdir -p ~/.openclaw/workspace/proposals

# Add the 4 cron jobs
npx openclaw cron add --name "spec-drift-detector" \
  --cron "0 */4 * * *" --session isolated \
  --message "Read the migration spec at /Users/thetadriven/github/IntentGuard/intentguard-migration-spec.html. Compare each status against actual files. Write drift report to ~/.openclaw/workspace/proposals/spec-drift-$(date +%Y-%m-%d).md" \
  --thinking high --announce --channel discord

npx openclaw cron add --name "code-review-scout" \
  --cron "0 */6 * * *" --session isolated \
  --message "Review recent git commits in IntentGuard for security, quality, and spec alignment. Write to ~/.openclaw/workspace/proposals/code-review-$(date +%Y-%m-%d).md" \
  --thinking medium --announce --channel discord

npx openclaw cron add --name "task-planner" \
  --cron "0 6,14,22 * * *" --session isolated \
  --message "Read spec, proposals, and progress report. Write prioritized task plan to ~/.openclaw/workspace/proposals/task-plan-$(date +%Y-%m-%d).md" \
  --thinking high --announce --channel discord

npx openclaw cron add --name "trust-debt-monitor" \
  --cron "0 3 * * *" --session isolated \
  --message "Check Trust Debt pipeline outputs for drift. Write status to ~/.openclaw/workspace/proposals/trust-debt-status-$(date +%Y-%m-%d).md" \
  --thinking medium --announce --channel discord

# Verify
npx openclaw cron list</pre>
      <h3>Safety Guardrails</h3>
      <div class="warn-box">
        <h3>CEO Constraints</h3>
        <div style="margin:0.3rem 0"><strong>No git writes:</strong> <span class="detail">CEO never commits, pushes, or modifies tracked files. Proposals directory is gitignored.</span></div><div style="margin:0.3rem 0"><strong>No external actions:</strong> <span class="detail">CEO reads and proposes only. No Discord DMs, no external API calls, no file modifications outside proposals/.</span></div><div style="margin:0.3rem 0"><strong>Timeout:</strong> <span class="detail">Each isolated session has a 300s timeout. If Sonnet spirals, it gets killed.</span></div><div style="margin:0.3rem 0"><strong>Backoff:</strong> <span class="detail">Consecutive errors trigger exponential backoff (30s ‚Üí 1m ‚Üí 5m ‚Üí 15m ‚Üí 60m). Auto-recovers on next success.</span></div><div style="margin:0.3rem 0"><strong>Concurrency:</strong> <span class="detail">maxConcurrentRuns: 1 ‚Äî only one cron job runs at a time. No resource contention.</span></div>
      </div>
    </section>
  <footer style="text-align:center;color:var(--muted);font-size:0.8rem;margin:3rem 0 1rem;border-top:1px solid var(--border);padding-top:1rem">
    IntentGuard Migration Spec v2.5.0 | Generated 2026-02-15 | 27 modular sections | CEO/Dev Subdivision + Cron-Driven Proactive Analysis | Sovereign Engine
  </footer>
</body>
</html>